var Nn=Object.defineProperty;var vn=(s,t,a)=>t in s?Nn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var ga=(s,t,a)=>vn(s,typeof t!="symbol"?t+"":t,a);import{r as b,a as wn,g as Sn,R as hr,u as pr,b as _n,L as fa,B as Cn,c as kn,d as we,N as En}from"./react-vendor-k558Nszg.js";import{L as Pn,A as Oe,a as An,R as Rn,M as Ln,b as Xe,P as gr,B as On,S as fr,F as Ut,c as Me,X as Os,d as Tn,G as In,e as Fn,U as zt,I as $n,f as br,g as ba,C as Ns,h as Je,i as yr,H as ya,D as Bt,W as Mn,j as gt,k as ja,l as Dn,m as ze,n as Na,o as Un,p as zn,T as bt,q as vs,r as Ze,s as ht,t as Ye,u as et,v as Bn,w as va,x as wa,K as qn,y as Hn,z as ds,E as Sa,J as us,N as ms,O as Ts,Q as _a,V as Is,Y as Vn,Z as Kn,_ as Gn,$ as Wn,a0 as Fs,a1 as Ca,a2 as ka,a3 as Jn,a4 as Qn,a5 as Xn,a6 as Zn,a7 as Yn,a8 as ei}from"./ui-vendor-D6YXW-SD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var jr={exports:{}},Wt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ti=b,si=Symbol.for("react.element"),ai=Symbol.for("react.fragment"),ri=Object.prototype.hasOwnProperty,ni=ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ii={key:!0,ref:!0,__self:!0,__source:!0};function Nr(s,t,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)ri.call(t,r)&&!ii.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:si,type:s,key:i,ref:l,props:n,_owner:ni.current}}Wt.Fragment=ai;Wt.jsx=Nr;Wt.jsxs=Nr;jr.exports=Wt;var e=jr.exports,ws={},Ea=wn;ws.createRoot=Ea.createRoot,ws.hydrateRoot=Ea.hydrateRoot;const li={},Pa=s=>{let t;const a=new Set,r=(m,x)=>{const g=typeof m=="function"?m(t):m;if(!Object.is(g,t)){const y=t;t=x??(typeof g!="object"||g===null)?g:Object.assign({},t,g),a.forEach(h=>h(t,y))}},n=()=>t,c={setState:r,getState:n,getInitialState:()=>d,subscribe:m=>(a.add(m),()=>a.delete(m)),destroy:()=>{(li?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},d=t=s(r,n,c);return c},oi=s=>s?Pa(s):Pa;var vr={exports:{}},wr={},Sr={exports:{}},_r={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tt=b;function ci(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var di=typeof Object.is=="function"?Object.is:ci,ui=tt.useState,mi=tt.useEffect,xi=tt.useLayoutEffect,hi=tt.useDebugValue;function pi(s,t){var a=t(),r=ui({inst:{value:a,getSnapshot:t}}),n=r[0].inst,i=r[1];return xi(function(){n.value=a,n.getSnapshot=t,xs(n)&&i({inst:n})},[s,a,t]),mi(function(){return xs(n)&&i({inst:n}),s(function(){xs(n)&&i({inst:n})})},[s]),hi(a),a}function xs(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!di(s,a)}catch{return!0}}function gi(s,t){return t()}var fi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gi:pi;_r.useSyncExternalStore=tt.useSyncExternalStore!==void 0?tt.useSyncExternalStore:fi;Sr.exports=_r;var bi=Sr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=b,yi=bi;function ji(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Ni=typeof Object.is=="function"?Object.is:ji,vi=yi.useSyncExternalStore,wi=Jt.useRef,Si=Jt.useEffect,_i=Jt.useMemo,Ci=Jt.useDebugValue;wr.useSyncExternalStoreWithSelector=function(s,t,a,r,n){var i=wi(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=_i(function(){function c(y){if(!d){if(d=!0,m=y,y=r(y),n!==void 0&&l.hasValue){var h=l.value;if(n(h,y))return x=h}return x=y}if(h=x,Ni(m,y))return h;var p=r(y);return n!==void 0&&n(h,p)?(m=y,h):(m=y,x=p)}var d=!1,m,x,g=a===void 0?null:a;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,a,r,n]);var o=vi(s,i[0],i[1]);return Si(function(){l.hasValue=!0,l.value=o},[o]),Ci(o),o};vr.exports=wr;var ki=vr.exports;const Ei=Sn(ki),Cr={},{useDebugValue:Pi}=hr,{useSyncExternalStoreWithSelector:Ai}=Ei;let Aa=!1;const Ri=s=>s;function Li(s,t=Ri,a){(Cr?"production":void 0)!=="production"&&a&&!Aa&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Aa=!0);const r=Ai(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,a);return Pi(r),r}const Ra=s=>{(Cr?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?oi(s):s,a=(r,n)=>Li(t,r,n);return Object.assign(a,t),a},kr=s=>s?Ra(s):Ra;function Er(s,t){return function(){return s.apply(t,arguments)}}const{toString:Oi}=Object.prototype,{getPrototypeOf:$s}=Object,{iterator:Qt,toStringTag:Pr}=Symbol,Xt=(s=>t=>{const a=Oi.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Se=s=>(s=s.toLowerCase(),t=>Xt(t)===s),Zt=s=>t=>typeof t===s,{isArray:at}=Array,st=Zt("undefined");function yt(s){return s!==null&&!st(s)&&s.constructor!==null&&!st(s.constructor)&&ge(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Ar=Se("ArrayBuffer");function Ti(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&Ar(s.buffer),t}const Ii=Zt("string"),ge=Zt("function"),Rr=Zt("number"),jt=s=>s!==null&&typeof s=="object",Fi=s=>s===!0||s===!1,$t=s=>{if(Xt(s)!=="object")return!1;const t=$s(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Pr in s)&&!(Qt in s)},$i=s=>{if(!jt(s)||yt(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Mi=Se("Date"),Di=Se("File"),Ui=Se("Blob"),zi=Se("FileList"),Bi=s=>jt(s)&&ge(s.pipe),qi=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||ge(s.append)&&((t=Xt(s))==="formdata"||t==="object"&&ge(s.toString)&&s.toString()==="[object FormData]"))},Hi=Se("URLSearchParams"),[Vi,Ki,Gi,Wi]=["ReadableStream","Request","Response","Headers"].map(Se),Ji=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nt(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let r,n;if(typeof s!="object"&&(s=[s]),at(s))for(r=0,n=s.length;r<n;r++)t.call(null,s[r],r,s);else{if(yt(s))return;const i=a?Object.getOwnPropertyNames(s):Object.keys(s),l=i.length;let o;for(r=0;r<l;r++)o=i[r],t.call(null,s[o],o,s)}}function Lr(s,t){if(yt(s))return null;t=t.toLowerCase();const a=Object.keys(s);let r=a.length,n;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const Be=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Or=s=>!st(s)&&s!==Be;function Ss(){const{caseless:s,skipUndefined:t}=Or(this)&&this||{},a={},r=(n,i)=>{const l=s&&Lr(a,i)||i;$t(a[l])&&$t(n)?a[l]=Ss(a[l],n):$t(n)?a[l]=Ss({},n):at(n)?a[l]=n.slice():(!t||!st(n))&&(a[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Nt(arguments[n],r);return a}const Qi=(s,t,a,{allOwnKeys:r}={})=>(Nt(t,(n,i)=>{a&&ge(n)?s[i]=Er(n,a):s[i]=n},{allOwnKeys:r}),s),Xi=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Zi=(s,t,a,r)=>{s.prototype=Object.create(t.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},Yi=(s,t,a,r)=>{let n,i,l;const o={};if(t=t||{},s==null)return t;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)l=n[i],(!r||r(l,s,t))&&!o[l]&&(t[l]=s[l],o[l]=!0);s=a!==!1&&$s(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},el=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const r=s.indexOf(t,a);return r!==-1&&r===a},tl=s=>{if(!s)return null;if(at(s))return s;let t=s.length;if(!Rr(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},sl=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&$s(Uint8Array)),al=(s,t)=>{const r=(s&&s[Qt]).call(s);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(s,i[0],i[1])}},rl=(s,t)=>{let a;const r=[];for(;(a=s.exec(t))!==null;)r.push(a);return r},nl=Se("HTMLFormElement"),il=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),La=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),ll=Se("RegExp"),Tr=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),r={};Nt(a,(n,i)=>{let l;(l=t(n,i,s))!==!1&&(r[i]=l||n)}),Object.defineProperties(s,r)},ol=s=>{Tr(s,(t,a)=>{if(ge(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=s[a];if(ge(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},cl=(s,t)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return at(s)?r(s):r(String(s).split(t)),a},dl=()=>{},ul=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function ml(s){return!!(s&&ge(s.append)&&s[Pr]==="FormData"&&s[Qt])}const xl=s=>{const t=new Array(10),a=(r,n)=>{if(jt(r)){if(t.indexOf(r)>=0)return;if(yt(r))return r;if(!("toJSON"in r)){t[n]=r;const i=at(r)?[]:{};return Nt(r,(l,o)=>{const c=a(l,n+1);!st(c)&&(i[o]=c)}),t[n]=void 0,i}}return r};return a(s,0)},hl=Se("AsyncFunction"),pl=s=>s&&(jt(s)||ge(s))&&ge(s.then)&&ge(s.catch),Ir=((s,t)=>s?setImmediate:t?((a,r)=>(Be.addEventListener("message",({source:n,data:i})=>{n===Be&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),Be.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ge(Be.postMessage)),gl=typeof queueMicrotask<"u"?queueMicrotask.bind(Be):typeof process<"u"&&process.nextTick||Ir,fl=s=>s!=null&&ge(s[Qt]),N={isArray:at,isArrayBuffer:Ar,isBuffer:yt,isFormData:qi,isArrayBufferView:Ti,isString:Ii,isNumber:Rr,isBoolean:Fi,isObject:jt,isPlainObject:$t,isEmptyObject:$i,isReadableStream:Vi,isRequest:Ki,isResponse:Gi,isHeaders:Wi,isUndefined:st,isDate:Mi,isFile:Di,isBlob:Ui,isRegExp:ll,isFunction:ge,isStream:Bi,isURLSearchParams:Hi,isTypedArray:sl,isFileList:zi,forEach:Nt,merge:Ss,extend:Qi,trim:Ji,stripBOM:Xi,inherits:Zi,toFlatObject:Yi,kindOf:Xt,kindOfTest:Se,endsWith:el,toArray:tl,forEachEntry:al,matchAll:rl,isHTMLForm:nl,hasOwnProperty:La,hasOwnProp:La,reduceDescriptors:Tr,freezeMethods:ol,toObjectSet:cl,toCamelCase:il,noop:dl,toFiniteNumber:ul,findKey:Lr,global:Be,isContextDefined:Or,isSpecCompliantForm:ml,toJSONObject:xl,isAsyncFn:hl,isThenable:pl,setImmediate:Ir,asap:gl,isIterable:fl};function q(s,t,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}N.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const Fr=q.prototype,$r={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{$r[s]={value:s}});Object.defineProperties(q,$r);Object.defineProperty(Fr,"isAxiosError",{value:!0});q.from=(s,t,a,r,n,i)=>{const l=Object.create(Fr);N.toFlatObject(s,l,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const o=s&&s.message?s.message:"Error",c=t==null&&s?s.code:t;return q.call(l,o,c,a,r,n),s&&l.cause==null&&Object.defineProperty(l,"cause",{value:s,configurable:!0}),l.name=s&&s.name||"Error",i&&Object.assign(l,i),l};const bl=null;function _s(s){return N.isPlainObject(s)||N.isArray(s)}function Mr(s){return N.endsWith(s,"[]")?s.slice(0,-2):s}function Oa(s,t,a){return s?s.concat(t).map(function(n,i){return n=Mr(n),!a&&i?"["+n+"]":n}).join(a?".":""):t}function yl(s){return N.isArray(s)&&!s.some(_s)}const jl=N.toFlatObject(N,{},null,function(t){return/^is[A-Z]/.test(t)});function Yt(s,t,a){if(!N.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=N.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,u){return!N.isUndefined(u[p])});const r=a.metaTokens,n=a.visitor||m,i=a.dots,l=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(t);if(!N.isFunction(n))throw new TypeError("visitor must be a function");function d(h){if(h===null)return"";if(N.isDate(h))return h.toISOString();if(N.isBoolean(h))return h.toString();if(!c&&N.isBlob(h))throw new q("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(h)||N.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function m(h,p,u){let w=h;if(h&&!u&&typeof h=="object"){if(N.endsWith(p,"{}"))p=r?p:p.slice(0,-2),h=JSON.stringify(h);else if(N.isArray(h)&&yl(h)||(N.isFileList(h)||N.endsWith(p,"[]"))&&(w=N.toArray(h)))return p=Mr(p),w.forEach(function(_,S){!(N.isUndefined(_)||_===null)&&t.append(l===!0?Oa([p],S,i):l===null?p:p+"[]",d(_))}),!1}return _s(h)?!0:(t.append(Oa(u,p,i),d(h)),!1)}const x=[],g=Object.assign(jl,{defaultVisitor:m,convertValue:d,isVisitable:_s});function y(h,p){if(!N.isUndefined(h)){if(x.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));x.push(h),N.forEach(h,function(w,k){(!(N.isUndefined(w)||w===null)&&n.call(t,w,N.isString(k)?k.trim():k,p,g))===!0&&y(w,p?p.concat(k):[k])}),x.pop()}}if(!N.isObject(s))throw new TypeError("data must be an object");return y(s),t}function Ta(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ms(s,t){this._pairs=[],s&&Yt(s,this,t)}const Dr=Ms.prototype;Dr.append=function(t,a){this._pairs.push([t,a])};Dr.toString=function(t){const a=t?function(r){return t.call(this,r,Ta)}:Ta;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function Nl(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ur(s,t,a){if(!t)return s;const r=a&&a.encode||Nl;N.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(t,a):i=N.isURLSearchParams(t)?t.toString():new Ms(t,a).toString(r),i){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class Ia{constructor(){this.handlers=[]}use(t,a,r){return this.handlers.push({fulfilled:t,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){N.forEach(this.handlers,function(r){r!==null&&t(r)})}}const zr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vl=typeof URLSearchParams<"u"?URLSearchParams:Ms,wl=typeof FormData<"u"?FormData:null,Sl=typeof Blob<"u"?Blob:null,_l={isBrowser:!0,classes:{URLSearchParams:vl,FormData:wl,Blob:Sl},protocols:["http","https","file","blob","url","data"]},Ds=typeof window<"u"&&typeof document<"u",Cs=typeof navigator=="object"&&navigator||void 0,Cl=Ds&&(!Cs||["ReactNative","NativeScript","NS"].indexOf(Cs.product)<0),kl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",El=Ds&&window.location.href||"http://localhost",Pl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ds,hasStandardBrowserEnv:Cl,hasStandardBrowserWebWorkerEnv:kl,navigator:Cs,origin:El},Symbol.toStringTag,{value:"Module"})),ue={...Pl,..._l};function Al(s,t){return Yt(s,new ue.classes.URLSearchParams,{visitor:function(a,r,n,i){return ue.isNode&&N.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Rl(s){return N.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ll(s){const t={},a=Object.keys(s);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],t[i]=s[i];return t}function Br(s){function t(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=a.length;return l=!l&&N.isArray(n)?n.length:l,c?(N.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!o):((!n[l]||!N.isObject(n[l]))&&(n[l]=[]),t(a,r,n[l],i)&&N.isArray(n[l])&&(n[l]=Ll(n[l])),!o)}if(N.isFormData(s)&&N.isFunction(s.entries)){const a={};return N.forEachEntry(s,(r,n)=>{t(Rl(r),n,a,0)}),a}return null}function Ol(s,t,a){if(N.isString(s))try{return(t||JSON.parse)(s),N.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(s)}const vt={transitional:zr,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=N.isObject(t);if(i&&N.isHTMLForm(t)&&(t=new FormData(t)),N.isFormData(t))return n?JSON.stringify(Br(t)):t;if(N.isArrayBuffer(t)||N.isBuffer(t)||N.isStream(t)||N.isFile(t)||N.isBlob(t)||N.isReadableStream(t))return t;if(N.isArrayBufferView(t))return t.buffer;if(N.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Al(t,this.formSerializer).toString();if((o=N.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Yt(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),Ol(t)):t}],transformResponse:[function(t){const a=this.transitional||vt.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(N.isResponse(t)||N.isReadableStream(t))return t;if(t&&N.isString(t)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?q.from(o,q.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],s=>{vt.headers[s]={}});const Tl=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Il=s=>{const t={};let a,r,n;return s&&s.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||t[a]&&Tl[a])&&(a==="set-cookie"?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)}),t},Fa=Symbol("internals");function dt(s){return s&&String(s).trim().toLowerCase()}function Mt(s){return s===!1||s==null?s:N.isArray(s)?s.map(Mt):String(s)}function Fl(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(s);)t[r[1]]=r[2];return t}const $l=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function hs(s,t,a,r,n){if(N.isFunction(r))return r.call(this,t,a);if(n&&(t=a),!!N.isString(t)){if(N.isString(r))return t.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(t)}}function Ml(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,r)=>a.toUpperCase()+r)}function Dl(s,t){const a=N.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+a,{value:function(n,i,l){return this[r].call(this,t,n,i,l)},configurable:!0})})}let fe=class{constructor(t){t&&this.set(t)}set(t,a,r){const n=this;function i(o,c,d){const m=dt(c);if(!m)throw new Error("header name must be a non-empty string");const x=N.findKey(n,m);(!x||n[x]===void 0||d===!0||d===void 0&&n[x]!==!1)&&(n[x||c]=Mt(o))}const l=(o,c)=>N.forEach(o,(d,m)=>i(d,m,c));if(N.isPlainObject(t)||t instanceof this.constructor)l(t,a);else if(N.isString(t)&&(t=t.trim())&&!$l(t))l(Il(t),a);else if(N.isObject(t)&&N.isIterable(t)){let o={},c,d;for(const m of t){if(!N.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[d=m[0]]=(c=o[d])?N.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}l(o,a)}else t!=null&&i(a,t,r);return this}get(t,a){if(t=dt(t),t){const r=N.findKey(this,t);if(r){const n=this[r];if(!a)return n;if(a===!0)return Fl(n);if(N.isFunction(a))return a.call(this,n,r);if(N.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=dt(t),t){const r=N.findKey(this,t);return!!(r&&this[r]!==void 0&&(!a||hs(this,this[r],r,a)))}return!1}delete(t,a){const r=this;let n=!1;function i(l){if(l=dt(l),l){const o=N.findKey(r,l);o&&(!a||hs(r,r[o],o,a))&&(delete r[o],n=!0)}}return N.isArray(t)?t.forEach(i):i(t),n}clear(t){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!t||hs(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const a=this,r={};return N.forEach(this,(n,i)=>{const l=N.findKey(r,i);if(l){a[l]=Mt(n),delete a[i];return}const o=t?Ml(i):String(i).trim();o!==i&&delete a[i],a[o]=Mt(n),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return N.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=t&&N.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const r=new this(t);return a.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[Fa]=this[Fa]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=dt(l);r[o]||(Dl(n,l),r[o]=!0)}return N.isArray(t)?t.forEach(i):i(t),this}};fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(fe.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(r){this[a]=r}}});N.freezeMethods(fe);function ps(s,t){const a=this||vt,r=t||a,n=fe.from(r.headers);let i=r.data;return N.forEach(s,function(o){i=o.call(a,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function qr(s){return!!(s&&s.__CANCEL__)}function rt(s,t,a){q.call(this,s??"canceled",q.ERR_CANCELED,t,a),this.name="CanceledError"}N.inherits(rt,q,{__CANCEL__:!0});function Hr(s,t,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?s(a):t(new q("Request failed with status code "+a.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Ul(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function zl(s,t){s=s||10;const a=new Array(s),r=new Array(s);let n=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=r[i];l||(l=d),a[n]=c,r[n]=d;let x=i,g=0;for(;x!==n;)g+=a[x++],x=x%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),d-l<t)return;const y=m&&d-m;return y?Math.round(g*1e3/y):void 0}}function Bl(s,t){let a=0,r=1e3/t,n,i;const l=(d,m=Date.now())=>{a=m,n=null,i&&(clearTimeout(i),i=null),s(...d)};return[(...d)=>{const m=Date.now(),x=m-a;x>=r?l(d,m):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},r-x)))},()=>n&&l(n)]}const qt=(s,t,a=3)=>{let r=0;const n=zl(50,250);return Bl(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-r,d=n(c),m=l<=o;r=l;const x={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&m?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};s(x)},a)},$a=(s,t)=>{const a=s!=null;return[r=>t[0]({lengthComputable:a,total:s,loaded:r}),t[1]]},Ma=s=>(...t)=>N.asap(()=>s(...t)),ql=ue.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,ue.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(ue.origin),ue.navigator&&/(msie|trident)/i.test(ue.navigator.userAgent)):()=>!0,Hl=ue.hasStandardBrowserEnv?{write(s,t,a,r,n,i,l){if(typeof document>"u")return;const o=[`${s}=${encodeURIComponent(t)}`];N.isNumber(a)&&o.push(`expires=${new Date(a).toUTCString()}`),N.isString(r)&&o.push(`path=${r}`),N.isString(n)&&o.push(`domain=${n}`),i===!0&&o.push("secure"),N.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Vl(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Kl(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function Vr(s,t,a){let r=!Vl(t);return s&&(r||a==!1)?Kl(s,t):t}const Da=s=>s instanceof fe?{...s}:s;function He(s,t){t=t||{};const a={};function r(d,m,x,g){return N.isPlainObject(d)&&N.isPlainObject(m)?N.merge.call({caseless:g},d,m):N.isPlainObject(m)?N.merge({},m):N.isArray(m)?m.slice():m}function n(d,m,x,g){if(N.isUndefined(m)){if(!N.isUndefined(d))return r(void 0,d,x,g)}else return r(d,m,x,g)}function i(d,m){if(!N.isUndefined(m))return r(void 0,m)}function l(d,m){if(N.isUndefined(m)){if(!N.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function o(d,m,x){if(x in t)return r(d,m);if(x in s)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,m,x)=>n(Da(d),Da(m),x,!0)};return N.forEach(Object.keys({...s,...t}),function(m){const x=c[m]||n,g=x(s[m],t[m],m);N.isUndefined(g)&&x!==o||(a[m]=g)}),a}const Kr=s=>{const t=He({},s);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=fe.from(l),t.url=Ur(Vr(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),N.isFormData(a)){if(ue.hasStandardBrowserEnv||ue.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(N.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,x])=>{d.includes(m.toLowerCase())&&l.set(m,x)})}}if(ue.hasStandardBrowserEnv&&(r&&N.isFunction(r)&&(r=r(t)),r||r!==!1&&ql(t.url))){const c=n&&i&&Hl.read(i);c&&l.set(n,c)}return t},Gl=typeof XMLHttpRequest<"u",Wl=Gl&&function(s){return new Promise(function(a,r){const n=Kr(s);let i=n.data;const l=fe.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,m,x,g,y,h;function p(){y&&y(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let u=new XMLHttpRequest;u.open(n.method.toUpperCase(),n.url,!0),u.timeout=n.timeout;function w(){if(!u)return;const _=fe.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:_,config:s,request:u};Hr(function(j){a(j),p()},function(j){r(j),p()},A),u=null}"onloadend"in u?u.onloadend=w:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(w)},u.onabort=function(){u&&(r(new q("Request aborted",q.ECONNABORTED,s,u)),u=null)},u.onerror=function(S){const A=S&&S.message?S.message:"Network Error",R=new q(A,q.ERR_NETWORK,s,u);R.event=S||null,r(R),u=null},u.ontimeout=function(){let S=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||zr;n.timeoutErrorMessage&&(S=n.timeoutErrorMessage),r(new q(S,A.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,s,u)),u=null},i===void 0&&l.setContentType(null),"setRequestHeader"in u&&N.forEach(l.toJSON(),function(S,A){u.setRequestHeader(A,S)}),N.isUndefined(n.withCredentials)||(u.withCredentials=!!n.withCredentials),o&&o!=="json"&&(u.responseType=n.responseType),d&&([g,h]=qt(d,!0),u.addEventListener("progress",g)),c&&u.upload&&([x,y]=qt(c),u.upload.addEventListener("progress",x),u.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(m=_=>{u&&(r(!_||_.type?new rt(null,s,u):_),u.abort(),u=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const k=Ul(n.url);if(k&&ue.protocols.indexOf(k)===-1){r(new q("Unsupported protocol "+k+":",q.ERR_BAD_REQUEST,s));return}u.send(i||null)})},Jl=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let r=new AbortController,n;const i=function(d){if(!n){n=!0,o();const m=d instanceof Error?d:this.reason;r.abort(m instanceof q?m:new rt(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,i(new q(`timeout ${t} of ms exceeded`,q.ETIMEDOUT))},t);const o=()=>{s&&(l&&clearTimeout(l),l=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),s=null)};s.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>N.asap(o),c}},Ql=function*(s,t){let a=s.byteLength;if(a<t){yield s;return}let r=0,n;for(;r<a;)n=r+t,yield s.slice(r,n),r=n},Xl=async function*(s,t){for await(const a of Zl(s))yield*Ql(a,t)},Zl=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:r}=await t.read();if(a)break;yield r}}finally{await t.cancel()}},Ua=(s,t,a,r)=>{const n=Xl(s,t);let i=0,l,o=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await n.next();if(d){o(),c.close();return}let x=m.byteLength;if(a){let g=i+=x;a(g)}c.enqueue(new Uint8Array(m))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},za=64*1024,{isFunction:Tt}=N,Yl=(({Request:s,Response:t})=>({Request:s,Response:t}))(N.global),{ReadableStream:Ba,TextEncoder:qa}=N.global,Ha=(s,...t)=>{try{return!!s(...t)}catch{return!1}},eo=s=>{s=N.merge.call({skipUndefined:!0},Yl,s);const{fetch:t,Request:a,Response:r}=s,n=t?Tt(t):typeof fetch=="function",i=Tt(a),l=Tt(r);if(!n)return!1;const o=n&&Tt(Ba),c=n&&(typeof qa=="function"?(h=>p=>h.encode(p))(new qa):async h=>new Uint8Array(await new a(h).arrayBuffer())),d=i&&o&&Ha(()=>{let h=!1;const p=new a(ue.origin,{body:new Ba,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!p}),m=l&&o&&Ha(()=>N.isReadableStream(new r("").body)),x={stream:m&&(h=>h.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!x[h]&&(x[h]=(p,u)=>{let w=p&&p[h];if(w)return w.call(p);throw new q(`Response type '${h}' is not supported`,q.ERR_NOT_SUPPORT,u)})});const g=async h=>{if(h==null)return 0;if(N.isBlob(h))return h.size;if(N.isSpecCompliantForm(h))return(await new a(ue.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(N.isArrayBufferView(h)||N.isArrayBuffer(h))return h.byteLength;if(N.isURLSearchParams(h)&&(h=h+""),N.isString(h))return(await c(h)).byteLength},y=async(h,p)=>{const u=N.toFiniteNumber(h.getContentLength());return u??g(p)};return async h=>{let{url:p,method:u,data:w,signal:k,cancelToken:_,timeout:S,onDownloadProgress:A,onUploadProgress:R,responseType:j,headers:I,withCredentials:Y="same-origin",fetchOptions:te}=Kr(h),Z=t||fetch;j=j?(j+"").toLowerCase():"text";let U=Jl([k,_&&_.toAbortSignal()],S),se=null;const J=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let E;try{if(R&&d&&u!=="get"&&u!=="head"&&(E=await y(I,w))!==0){let H=new a(p,{method:"POST",body:w,duplex:"half"}),Q;if(N.isFormData(w)&&(Q=H.headers.get("content-type"))&&I.setContentType(Q),H.body){const[v,P]=$a(E,qt(Ma(R)));w=Ua(H.body,za,v,P)}}N.isString(Y)||(Y=Y?"include":"omit");const L=i&&"credentials"in a.prototype,$={...te,signal:U,method:u.toUpperCase(),headers:I.normalize().toJSON(),body:w,duplex:"half",credentials:L?Y:void 0};se=i&&new a(p,$);let F=await(i?Z(se,te):Z(p,$));const W=m&&(j==="stream"||j==="response");if(m&&(A||W&&J)){const H={};["status","statusText","headers"].forEach(X=>{H[X]=F[X]});const Q=N.toFiniteNumber(F.headers.get("content-length")),[v,P]=A&&$a(Q,qt(Ma(A),!0))||[];F=new r(Ua(F.body,za,v,()=>{P&&P(),J&&J()}),H)}j=j||"text";let K=await x[N.findKey(x,j)||"text"](F,h);return!W&&J&&J(),await new Promise((H,Q)=>{Hr(H,Q,{data:K,headers:fe.from(F.headers),status:F.status,statusText:F.statusText,config:h,request:se})})}catch(L){throw J&&J(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new q("Network Error",q.ERR_NETWORK,h,se),{cause:L.cause||L}):q.from(L,L&&L.code,h,se)}}},to=new Map,Gr=s=>{let t=s&&s.env||{};const{fetch:a,Request:r,Response:n}=t,i=[r,n,a];let l=i.length,o=l,c,d,m=to;for(;o--;)c=i[o],d=m.get(c),d===void 0&&m.set(c,d=o?new Map:eo(t)),m=d;return d};Gr();const Us={http:bl,xhr:Wl,fetch:{get:Gr}};N.forEach(Us,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Va=s=>`- ${s}`,so=s=>N.isFunction(s)||s===null||s===!1;function ao(s,t){s=N.isArray(s)?s:[s];const{length:a}=s;let r,n;const i={};for(let l=0;l<a;l++){r=s[l];let o;if(n=r,!so(r)&&(n=Us[(o=String(r)).toLowerCase()],n===void 0))throw new q(`Unknown adapter '${o}'`);if(n&&(N.isFunction(n)||(n=n.get(t))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=a?l.length>1?`since :
`+l.map(Va).join(`
`):" "+Va(l[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n}const Wr={getAdapter:ao,adapters:Us};function gs(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new rt(null,s)}function Ka(s){return gs(s),s.headers=fe.from(s.headers),s.data=ps.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Wr.getAdapter(s.adapter||vt.adapter,s)(s).then(function(r){return gs(s),r.data=ps.call(s,s.transformResponse,r),r.headers=fe.from(r.headers),r},function(r){return qr(r)||(gs(s),r&&r.response&&(r.response.data=ps.call(s,s.transformResponse,r.response),r.response.headers=fe.from(r.response.headers))),Promise.reject(r)})}const Jr="1.13.2",es={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{es[s]=function(r){return typeof r===s||"a"+(t<1?"n ":" ")+s}});const Ga={};es.transitional=function(t,a,r){function n(i,l){return"[Axios v"+Jr+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,o)=>{if(t===!1)throw new q(n(l," has been removed"+(a?" in "+a:"")),q.ERR_DEPRECATED);return a&&!Ga[l]&&(Ga[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,l,o):!0}};es.spelling=function(t){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function ro(s,t,a){if(typeof s!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let n=r.length;for(;n-- >0;){const i=r[n],l=t[i];if(l){const o=s[i],c=o===void 0||l(o,i,s);if(c!==!0)throw new q("option "+i+" must be "+c,q.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new q("Unknown option "+i,q.ERR_BAD_OPTION)}}const Dt={assertOptions:ro,validators:es},ke=Dt.validators;let qe=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ia,response:new Ia}}async request(t,a){try{return await this._request(t,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=He(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Dt.assertOptions(r,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),n!=null&&(N.isFunction(n)?a.paramsSerializer={serialize:n}:Dt.assertOptions(n,{encode:ke.function,serialize:ke.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Dt.assertOptions(a,{baseUrl:ke.spelling("baseURL"),withXsrfToken:ke.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&N.merge(i.common,i[a.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),a.headers=fe.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(a)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let m,x=0,g;if(!c){const h=[Ka.bind(this),void 0];for(h.unshift(...o),h.push(...d),g=h.length,m=Promise.resolve(a);x<g;)m=m.then(h[x++],h[x++]);return m}g=o.length;let y=a;for(;x<g;){const h=o[x++],p=o[x++];try{y=h(y)}catch(u){p.call(this,u);break}}try{m=Ka.call(this,y)}catch(h){return Promise.reject(h)}for(x=0,g=d.length;x<g;)m=m.then(d[x++],d[x++]);return m}getUri(t){t=He(this.defaults,t);const a=Vr(t.baseURL,t.url,t.allowAbsoluteUrls);return Ur(a,t.params,t.paramsSerializer)}};N.forEach(["delete","get","head","options"],function(t){qe.prototype[t]=function(a,r){return this.request(He(r||{},{method:t,url:a,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(t){function a(r){return function(i,l,o){return this.request(He(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}qe.prototype[t]=a(),qe.prototype[t+"Form"]=a(!0)});let no=class Qr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},t(function(i,l,o){r.reason||(r.reason=new rt(i,l,o),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=r=>{t.abort(r)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new Qr(function(n){t=n}),cancel:t}}};function io(s){return function(a){return s.apply(null,a)}}function lo(s){return N.isObject(s)&&s.isAxiosError===!0}const ks={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ks).forEach(([s,t])=>{ks[t]=s});function Xr(s){const t=new qe(s),a=Er(qe.prototype.request,t);return N.extend(a,qe.prototype,t,{allOwnKeys:!0}),N.extend(a,t,null,{allOwnKeys:!0}),a.create=function(n){return Xr(He(s,n))},a}const ie=Xr(vt);ie.Axios=qe;ie.CanceledError=rt;ie.CancelToken=no;ie.isCancel=qr;ie.VERSION=Jr;ie.toFormData=Yt;ie.AxiosError=q;ie.Cancel=ie.CanceledError;ie.all=function(t){return Promise.all(t)};ie.spread=io;ie.isAxiosError=lo;ie.mergeConfig=He;ie.AxiosHeaders=fe;ie.formToJSON=s=>Br(N.isHTMLForm(s)?new FormData(s):s);ie.getAdapter=Wr.getAdapter;ie.HttpStatusCode=ks;ie.default=ie;const{Axios:kd,AxiosError:Ed,CanceledError:Pd,isCancel:Ad,CancelToken:Rd,VERSION:Ld,all:Od,Cancel:Td,isAxiosError:Id,spread:Fd,toFormData:$d,AxiosHeaders:Md,HttpStatusCode:Dd,formToJSON:Ud,getAdapter:zd,mergeConfig:Bd}=ie,oo="/api";class co{constructor(){ga(this,"client");this.client=ie.create({baseURL:oo,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(t=>{const a=localStorage.getItem("access_token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>{var a;return((a=t.response)==null?void 0:a.status)===401&&(localStorage.removeItem("access_token"),window.location.href="/login"),Promise.reject(t)})}async get(t,a){return(await this.client.get(t,a)).data}async post(t,a,r){return(await this.client.post(t,a,r)).data}async put(t,a,r){return(await this.client.put(t,a,r)).data}async delete(t,a){return(await this.client.delete(t,a)).data}async login(t){const a=await this.client.post("/auth/login",t);return a.data.access_token&&localStorage.setItem("access_token",a.data.access_token),a.data}async logout(){await this.client.post("/auth/logout"),localStorage.removeItem("access_token")}async getCurrentUser(){return(await this.client.get("/auth/me")).data}async getPlugins(){return(await this.client.get("/plugins")).data}async getPlugin(t){return(await this.client.get(`/plugins/${t}`)).data}async pluginAction(t,a){const r={action:a};return(await this.client.post(`/plugins/${t}/action`,r)).data}async reloadPlugin(t){return(await this.client.post(`/plugins/${t}/action`,{action:"reload"})).data}async deletePlugin(t){return(await this.client.delete(`/plugins/${t}`)).data}async updatePluginConfig(t,a){return(await this.client.put(`/plugins/${t}/config`,{config:a})).data}async getPluginConfigSchema(t){return(await this.client.get(`/plugins/${t}/config-schema`)).data}async uploadPlugin(t){const a=new FormData;return a.append("file",t),(await this.client.post("/plugins/upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}async getSystemStatus(){return(await this.client.get("/system/status")).data}async getSystemConfig(){return(await this.client.get("/system/config")).data}async updateSystemConfig(t){return(await this.client.post("/system/config",t)).data}async resetAdminPassword(t){return(await this.client.post("/system/reset-admin-password",t)).data}async getOneBotConfig(){return(await this.client.get("/onebot/config")).data}async updateOneBotConfig(t){return(await this.client.post("/onebot/config",t)).data}async getLoginInfo(){return(await this.client.get("/onebot/login-info")).data}async getMessageLog(t){return(await this.client.get("/messages/log",{params:{limit:t}})).data}async getSystemLogs(t){return(await this.client.get("/system/logs",{params:{limit:t}})).data}async getChatContacts(){return(await this.client.get("/chat/contacts")).data}async sendChatMessage(t){return(await this.client.post("/chat/send",t)).data}async getChatHistory(t,a,r=50){return(await this.client.get(`/chat/history/${t}/${a}`,{params:{limit:r}})).data}async getAIConfig(t,a){return(await this.client.get("/ai/config",{params:{config_type:t,target_id:a}})).data}async updateAIConfig(t,a,r){return(await this.client.put("/ai/config",r,{params:{config_type:t,target_id:a},headers:{"Content-Type":"application/json"}})).data}async listAITools(){return(await this.client.get("/ai/tools")).data}async getEnabledTools(t,a){return(await this.client.get("/ai/tools/enabled",{params:{config_type:t,target_id:a}})).data}async updateEnabledTools(t,a,r){return(await this.client.put("/ai/tools/enabled",{enabled_tools:r},{params:{config_type:t,target_id:a}})).data}async listGroupConfigs(){return(await this.client.get("/ai/groups")).data}async batchUpdateGroups(t,a){return(await this.client.post("/ai/groups/batch",{...a,group_ids:t})).data}async listModels(){return(await this.client.get("/ai/models")).data}async getModel(t){return(await this.client.get(`/ai/models/${t}`)).data}async createModel(t){return(await this.client.post("/ai/models",t)).data}async updateModel(t,a){return(await this.client.put(`/ai/models/${t}`,a)).data}async deleteModel(t){return(await this.client.delete(`/ai/models/${t}`)).data}async listProviders(){return(await this.client.get("/ai/models/providers/list")).data}async listPresets(){return(await this.client.get("/ai/presets")).data}async getPreset(t){return(await this.client.get(`/ai/presets/${t}`)).data}async createPreset(t){return(await this.client.post("/ai/presets",t)).data}async updatePreset(t,a){return(await this.client.put(`/ai/presets/${t}`,a)).data}async deletePreset(t){return(await this.client.delete(`/ai/presets/${t}`)).data}async listMemories(t,a){return(await this.client.get("/ai/memories",{params:{memory_type:t,target_id:a}})).data}async getMemory(t){return(await this.client.get(`/ai/memories/${t}`)).data}async deleteMemory(t){return(await this.client.delete(`/ai/memories/${t}`)).data}async clearMemory(t,a,r){return(await this.client.post("/ai/memories/clear",{memory_type:t,target_id:a,preset_uuid:r||null})).data}async listMCPServers(t=!1){return(await this.client.get("/ai/mcp/servers",{params:{enabled_only:t}})).data}async getMCPServer(t){return(await this.client.get(`/ai/mcp/servers/${t}`)).data}async createMCPServer(t){return(await this.client.post("/ai/mcp/servers",t)).data}async updateMCPServer(t,a){return(await this.client.put(`/ai/mcp/servers/${t}`,a)).data}async deleteMCPServer(t){return(await this.client.delete(`/ai/mcp/servers/${t}`)).data}async connectMCPServer(t){return(await this.client.post(`/ai/mcp/servers/${t}/connect`)).data}async disconnectMCPServer(t){return(await this.client.post(`/ai/mcp/servers/${t}/disconnect`)).data}async getMCPServerTools(t){return(await this.client.get(`/ai/mcp/servers/${t}/tools`)).data}async getAllMCPTools(){return(await this.client.get("/ai/mcp/tools")).data}}const T=new co,Es=s=>typeof window>"u"?null:localStorage.getItem(s),fs=(s,t)=>{typeof window>"u"||localStorage.setItem(s,t)},It=s=>{typeof window>"u"||localStorage.removeItem(s)},uo=()=>{if(typeof window>"u")return{user:null,token:null,isAuthenticated:!1};const s=Es("user"),t=Es("access_token");return{user:s?JSON.parse(s):null,token:t,isAuthenticated:!!t}},zs=kr(s=>({...uo(),login:async(a,r)=>{const i=(await T.login({username:a,password:r})).access_token;fs("access_token",i);const l=await T.getCurrentUser();fs("user",JSON.stringify(l)),s({token:i,user:l,isAuthenticated:!0})},logout:async()=>{try{await T.logout()}catch(a){console.error("Logout error:",a)}finally{s({user:null,token:null,isAuthenticated:!1}),It("access_token"),It("user")}},checkAuth:async()=>{const a=Es("access_token");if(!a){s({user:null,token:null,isAuthenticated:!1});return}try{const r=await T.getCurrentUser();fs("user",JSON.stringify(r)),s({token:a,user:r,isAuthenticated:!0})}catch{s({user:null,token:null,isAuthenticated:!1}),It("access_token"),It("user")}}}));function mo(){if(console&&console.warn){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];typeof t[0]=="string"&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const Wa={};function Ps(){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];typeof t[0]=="string"&&Wa[t[0]]||(typeof t[0]=="string"&&(Wa[t[0]]=new Date),mo(...t))}const Zr=(s,t)=>()=>{if(s.isInitialized)t();else{const a=()=>{setTimeout(()=>{s.off("initialized",a)},0),t()};s.on("initialized",a)}};function Ja(s,t,a){s.loadNamespaces(t,Zr(s,a))}function Qa(s,t,a,r){typeof a=="string"&&(a=[a]),a.forEach(n=>{s.options.ns.indexOf(n)<0&&s.options.ns.push(n)}),s.loadLanguages(t,Zr(s,r))}function xo(s,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=t.languages[0],n=t.options?t.options.fallbackLng:!1,i=t.languages[t.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,c)=>{const d=t.services.backendConnector.state[`${o}|${c}`];return d===-1||d===2};return a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!l(t.isLanguageChangingTo,s)?!1:!!(t.hasResourceBundle(r,s)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||l(r,s)&&(!n||l(i,s)))}function ho(s,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(Ps("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(s,{lng:a.lng,precheck:(n,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,s))return!1}}):xo(s,t,a)}const po=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,go={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fo=s=>go[s],bo=s=>s.replace(po,fo);let As={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:bo};function yo(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};As={...As,...s}}function jo(){return As}let Yr;function No(s){Yr=s}function vo(){return Yr}const wo={type:"3rdParty",init(s){yo(s.options.react),No(s)}},So=b.createContext();class _o{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Co=(s,t)=>{const a=b.useRef();return b.useEffect(()=>{a.current=s},[s,t]),a.current};function Te(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:a}=t,{i18n:r,defaultNS:n}=b.useContext(So)||{},i=a||r||vo();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new _o),!i){Ps("You will need to pass in an i18next instance by using initReactI18next");const _=(A,R)=>typeof R=="string"?R:R&&typeof R=="object"&&typeof R.defaultValue=="string"?R.defaultValue:Array.isArray(A)?A[A.length-1]:A,S=[_,{},!1];return S.t=_,S.i18n={},S.ready=!1,S}i.options.react&&i.options.react.wait!==void 0&&Ps("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...jo(),...i.options.react,...t},{useSuspense:o,keyPrefix:c}=l;let d=n||i.options&&i.options.defaultNS;d=typeof d=="string"?[d]:d||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(d);const m=(i.isInitialized||i.initializedStoreOnce)&&d.every(_=>ho(_,i,l));function x(){return i.getFixedT(t.lng||null,l.nsMode==="fallback"?d:d[0],c)}const[g,y]=b.useState(x);let h=d.join();t.lng&&(h=`${t.lng}${h}`);const p=Co(h),u=b.useRef(!0);b.useEffect(()=>{const{bindI18n:_,bindI18nStore:S}=l;u.current=!0,!m&&!o&&(t.lng?Qa(i,t.lng,d,()=>{u.current&&y(x)}):Ja(i,d,()=>{u.current&&y(x)})),m&&p&&p!==h&&u.current&&y(x);function A(){u.current&&y(x)}return _&&i&&i.on(_,A),S&&i&&i.store.on(S,A),()=>{u.current=!1,_&&i&&_.split(" ").forEach(R=>i.off(R,A)),S&&i&&S.split(" ").forEach(R=>i.store.off(R,A))}},[i,h]);const w=b.useRef(!0);b.useEffect(()=>{u.current&&!w.current&&y(x),w.current=!1},[i,c]);const k=[g,i,m];if(k.t=g,k.i18n=i,k.ready=m,m||!m&&!o)return k;throw new Promise(_=>{t.lng?Qa(i,t.lng,d,()=>_()):Ja(i,d,()=>_())})}function ko(){const{t:s}=Te(),t=pr(),{login:a}=zs(),[r,n]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,m]=b.useState(!1),x=async g=>{var y,h;g.preventDefault(),c(""),m(!0);try{await a(r,i),t("/dashboard")}catch(p){c(((h=(y=p.response)==null?void 0:y.data)==null?void 0:h.detail)||s("login.loginFailed"))}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4",children:e.jsx(Pn,{className:"w-8 h-8 text-primary-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("login.title")}),e.jsx("p",{className:"text-gray-600",children:"OneBot Protocol Framework"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("span",{children:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("login.username")}),e.jsx("input",{type:"text",className:"input",value:r,onChange:g=>n(g.target.value),placeholder:s("login.usernamePlaceholder"),required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("login.password")}),e.jsx("input",{type:"password",className:"input",value:i,onChange:g=>l(g.target.value),placeholder:s("login.passwordPlaceholder"),required:!0})]}),e.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary w-full py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s(d?"common.loading":"login.loginButton")}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:s("login.defaultAccount")})]})]})})})}const Eo=()=>typeof window>"u"?!1:window.innerWidth>=1024,Po=kr(s=>({language:localStorage.getItem("language")||"zh",setLanguage:t=>{localStorage.setItem("language",t),s({language:t}),window.location.reload()},sidebarOpen:Eo(),setSidebarOpen:t=>s({sidebarOpen:t})}));function en(s){var t,a,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(a=en(s[t]))&&(r&&(r+=" "),r+=a)}else for(a in s)s[a]&&(r&&(r+=" "),r+=a);return r}function Ao(){for(var s,t,a=0,r="",n=arguments.length;a<n;a++)(s=arguments[a])&&(t=en(s))&&(r&&(r+=" "),r+=t);return r}const Bs="-",Ro=s=>{const t=Oo(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:l=>{const o=l.split(Bs);return o[0]===""&&o.length!==1&&o.shift(),tn(o,t)||Lo(l)},getConflictingClassGroupIds:(l,o)=>{const c=a[l]||[];return o&&r[l]?[...c,...r[l]]:c}}},tn=(s,t)=>{var l;if(s.length===0)return t.classGroupId;const a=s[0],r=t.nextPart.get(a),n=r?tn(s.slice(1),r):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Bs);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},Xa=/^\[(.+)\]$/,Lo=s=>{if(Xa.test(s)){const t=Xa.exec(s)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},Oo=s=>{const{theme:t,prefix:a}=s,r={nextPart:new Map,validators:[]};return Io(Object.entries(s.classGroups),a).forEach(([i,l])=>{Rs(l,r,i,t)}),r},Rs=(s,t,a,r)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:Za(t,n);i.classGroupId=a;return}if(typeof n=="function"){if(To(n)){Rs(n(r),t,a,r);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([i,l])=>{Rs(l,Za(t,i),a,r)})})},Za=(s,t)=>{let a=s;return t.split(Bs).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},To=s=>s.isThemeGetter,Io=(s,t)=>t?s.map(([a,r])=>{const n=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[a,n]}):s,Fo=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,r=new Map;const n=(i,l)=>{a.set(i,l),t++,t>s&&(t=0,r=a,a=new Map)};return{get(i){let l=a.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return n(i,l),l},set(i,l){a.has(i)?a.set(i,l):n(i,l)}}},sn="!",$o=s=>{const{separator:t,experimentalParseClassName:a}=s,r=t.length===1,n=t[0],i=t.length,l=o=>{const c=[];let d=0,m=0,x;for(let u=0;u<o.length;u++){let w=o[u];if(d===0){if(w===n&&(r||o.slice(u,u+i)===t)){c.push(o.slice(m,u)),m=u+i;continue}if(w==="/"){x=u;continue}}w==="["?d++:w==="]"&&d--}const g=c.length===0?o:o.substring(m),y=g.startsWith(sn),h=y?g.substring(1):g,p=x&&x>m?x-m:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:h,maybePostfixModifierPosition:p}};return a?o=>a({className:o,parseClassName:l}):l},Mo=s=>{if(s.length<=1)return s;const t=[];let a=[];return s.forEach(r=>{r[0]==="["?(t.push(...a.sort(),r),a=[]):a.push(r)}),t.push(...a.sort()),t},Do=s=>({cache:Fo(s.cacheSize),parseClassName:$o(s),...Ro(s)}),Uo=/\s+/,zo=(s,t)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:n}=t,i=[],l=s.trim().split(Uo);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:m,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:y}=a(d);let h=!!y,p=r(h?g.substring(0,y):g);if(!p){if(!h){o=d+(o.length>0?" "+o:o);continue}if(p=r(g),!p){o=d+(o.length>0?" "+o:o);continue}h=!1}const u=Mo(m).join(":"),w=x?u+sn:u,k=w+p;if(i.includes(k))continue;i.push(k);const _=n(p,h);for(let S=0;S<_.length;++S){const A=_[S];i.push(w+A)}o=d+(o.length>0?" "+o:o)}return o};function Bo(){let s=0,t,a,r="";for(;s<arguments.length;)(t=arguments[s++])&&(a=an(t))&&(r&&(r+=" "),r+=a);return r}const an=s=>{if(typeof s=="string")return s;let t,a="";for(let r=0;r<s.length;r++)s[r]&&(t=an(s[r]))&&(a&&(a+=" "),a+=t);return a};function qo(s,...t){let a,r,n,i=l;function l(c){const d=t.reduce((m,x)=>x(m),s());return a=Do(d),r=a.cache.get,n=a.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const m=zo(c,a);return n(c,m),m}return function(){return i(Bo.apply(null,arguments))}}const ae=s=>{const t=a=>a[s]||[];return t.isThemeGetter=!0,t},rn=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ho=/^\d+\/\d+$/,Vo=new Set(["px","full","screen"]),Ko=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Go=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wo=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Le=s=>Qe(s)||Vo.has(s)||Ho.test(s),Fe=s=>nt(s,"length",rc),Qe=s=>!!s&&!Number.isNaN(Number(s)),bs=s=>nt(s,"number",Qe),ut=s=>!!s&&Number.isInteger(Number(s)),Xo=s=>s.endsWith("%")&&Qe(s.slice(0,-1)),V=s=>rn.test(s),$e=s=>Ko.test(s),Zo=new Set(["length","size","percentage"]),Yo=s=>nt(s,Zo,nn),ec=s=>nt(s,"position",nn),tc=new Set(["image","url"]),sc=s=>nt(s,tc,ic),ac=s=>nt(s,"",nc),mt=()=>!0,nt=(s,t,a)=>{const r=rn.exec(s);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):a(r[2]):!1},rc=s=>Go.test(s)&&!Wo.test(s),nn=()=>!1,nc=s=>Jo.test(s),ic=s=>Qo.test(s),lc=()=>{const s=ae("colors"),t=ae("spacing"),a=ae("blur"),r=ae("brightness"),n=ae("borderColor"),i=ae("borderRadius"),l=ae("borderSpacing"),o=ae("borderWidth"),c=ae("contrast"),d=ae("grayscale"),m=ae("hueRotate"),x=ae("invert"),g=ae("gap"),y=ae("gradientColorStops"),h=ae("gradientColorStopPositions"),p=ae("inset"),u=ae("margin"),w=ae("opacity"),k=ae("padding"),_=ae("saturate"),S=ae("scale"),A=ae("sepia"),R=ae("skew"),j=ae("space"),I=ae("translate"),Y=()=>["auto","contain","none"],te=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",V,t],U=()=>[V,t],se=()=>["",Le,Fe],J=()=>["auto",Qe,V],E=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",V],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[Qe,V];return{cacheSize:500,separator:":",theme:{colors:[mt],spacing:[Le,Fe],blur:["none","",$e,V],brightness:H(),borderColor:[s],borderRadius:["none","","full",$e,V],borderSpacing:U(),borderWidth:se(),contrast:H(),grayscale:W(),hueRotate:H(),invert:W(),gap:U(),gradientColorStops:[s],gradientColorStopPositions:[Xo,Fe],inset:Z(),margin:Z(),opacity:H(),padding:U(),saturate:H(),scale:H(),sepia:W(),skew:H(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",V]}],container:["container"],columns:[{columns:[$e]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...E(),V]}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:Y()}],"overscroll-x":[{"overscroll-x":Y()}],"overscroll-y":[{"overscroll-y":Y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ut,V]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",V]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",ut,V]}],"grid-cols":[{"grid-cols":[mt]}],"col-start-end":[{col:["auto",{span:["full",ut,V]},V]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[mt]}],"row-start-end":[{row:["auto",{span:[ut,V]},V]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",V]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",V]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[u]}],mx:[{mx:[u]}],my:[{my:[u]}],ms:[{ms:[u]}],me:[{me:[u]}],mt:[{mt:[u]}],mr:[{mr:[u]}],mb:[{mb:[u]}],ml:[{ml:[u]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",V,t]}],"min-w":[{"min-w":[V,t,"min","max","fit"]}],"max-w":[{"max-w":[V,t,"none","full","min","max","fit","prose",{screen:[$e]},$e]}],h:[{h:[V,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[V,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[V,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[V,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$e,Fe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bs]}],"font-family":[{font:[mt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",V]}],"line-clamp":[{"line-clamp":["none",Qe,bs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Le,V]}],"list-image":[{"list-image":["none",V]}],"list-style-type":[{list:["none","disc","decimal",V]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Le,Fe]}],"underline-offset":[{"underline-offset":["auto",Le,V]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...E(),ec]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Yo]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sc]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:L()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[Le,V]}],"outline-w":[{outline:[Le,Fe]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Le,Fe]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",$e,ac]}],"shadow-color":[{shadow:[mt]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$e,V]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[x]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",V]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",V]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",V]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[ut,V]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",V]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Le,Fe,bs]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oc=qo(lc);function Ya(...s){return oc(Ao(s))}function Ee({children:s}){const t=pr(),a=_n(),{t:r,i18n:n}=Te(),{logout:i}=zs(),{sidebarOpen:l,setSidebarOpen:o}=Po(),c=()=>{i(),t("/login")},d=async()=>{const x=n.language==="zh"?"en":"zh";localStorage.setItem("language",x),await n.changeLanguage(x)},m=b.useMemo(()=>[{path:"/dashboard",icon:An,label:r("nav.dashboard")},{path:"/onebot",icon:Rn,label:r("nav.onebot")},{path:"/chat",icon:Ln,label:""},{path:"/messages",icon:Xe,label:r("nav.messages")},{path:"/plugins",icon:gr,label:r("nav.plugins")},{path:"/ai",icon:On,label:""},{path:"/security",icon:fr,label:r("nav.security")},{path:"/audit",icon:Ut,label:r("nav.audit")},{path:"/system",icon:Me,label:r("nav.system")}],[r,n.language]);return e.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:[e.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm fixed top-0 left-0 right-0 z-50",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(!l),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:l?e.jsx(Os,{className:"w-5 h-5"}):e.jsx(Tn,{className:"w-5 h-5"})}),e.jsxs(fa,{to:"/dashboard",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"XQ"})}),e.jsx("span",{className:"font-bold text-xl text-gray-900",children:"Xiaoyi_QQ"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:n.language==="zh"?"Switch to English":"",children:e.jsx(In,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Fn,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r("common.logout")})]})]})]})})}),e.jsxs("div",{className:"flex relative pt-16",children:[e.jsx("aside",{className:Ya("fixed lg:fixed inset-y-0 left-0 z-40 w-64 bg-white border-r border-gray-200 transition-transform duration-300 ease-in-out","top-16 lg:top-16 h-[calc(100vh-4rem)] lg:h-[calc(100vh-4rem)] overflow-y-auto",l?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:e.jsx("nav",{className:"p-4 space-y-1",children:m.map(x=>{const g=x.icon,y=a.pathname===x.path;return e.jsxs(fa,{to:x.path,onClick:()=>o(!1),className:Ya("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",y?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("span",{children:x.label})]},x.path)})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>o(!1),style:{top:"4rem"}}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 min-h-[calc(100vh-4rem)] lg:ml-64 max-w-full overflow-x-hidden w-full",children:e.jsx("div",{className:"max-w-full",children:s})})]})]})}function er(){var g,y,h,p,u,w,k,_,S,A,R,j;const{t:s}=Te(),[t,a]=b.useState(null),[r,n]=b.useState(null),[i,l]=b.useState(!0);b.useEffect(()=>{o(),c();const I=setInterval(()=>{o(),c()},5e3);return()=>clearInterval(I)},[]);const o=async()=>{try{const I=await T.getSystemStatus();a(I)}catch(I){console.error("Failed to load system status:",I)}finally{l(!1)}},c=async()=>{try{const I=await T.getLoginInfo();console.log("Login info response:",I),I.status==="ok"&&I.data?(console.log("Setting login info:",I.data),n(I.data)):console.log("Login info not available:",I)}catch(I){console.error("Failed to load login info:",I)}};if(i&&!t)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const d=(t==null?void 0:t.status)==="running",m=((g=t==null?void 0:t.memory)==null?void 0:g.percent)||0,x=((y=t==null?void 0:t.cpu)==null?void 0:y.usage)||0;return e.jsxs("div",{className:"flex flex-col space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("dashboard.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:""})]}),r&&(r.user_id||r.user_id===0)?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`http://q.qlogo.cn/headimg_dl?dst_uin=${r.user_id}&spec=640&img_type=jpg`,alt:"Avatar",className:"w-16 h-16 rounded-full border-2 border-gray-200",onError:I=>{const Y=I.target;Y.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect width="64" height="64" fill="%23e5e7eb"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af" font-size="24"%3E%3C/text%3E%3C/svg%3E'}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(zt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:r.nickname||""}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.user_id,")"]})]})]})]})}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"..."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s("dashboard.totalMessages")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:((h=t==null?void 0:t.event_bus)==null?void 0:h.total_events)||((p=t==null?void 0:t.event_bus)==null?void 0:p.history_size)||0})]}),e.jsx(Xe,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:((u=t==null?void 0:t.event_bus)==null?void 0:u.today_received)||0})]}),e.jsx($n,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:((w=t==null?void 0:t.event_bus)==null?void 0:w.today_sent)||0})]}),e.jsx(br,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s("dashboard.activePlugins")}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[((k=t==null?void 0:t.plugins)==null?void 0:k.enabled)||0," / ",((_=t==null?void 0:t.plugins)==null?void 0:_.total)||0]})]}),e.jsx(gr,{className:"w-8 h-8 text-orange-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:""}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:((S=t==null?void 0:t.bot_status)==null?void 0:S.status_text)||""}),((A=t==null?void 0:t.bot_status)==null?void 0:A.connection_type)&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.bot_status.connection_type==="ws"||t.bot_status.connection_type==="ws_forward"?"WebSocket":t.bot_status.connection_type==="ws_reverse"?"WebSocket":"HTTP"})]}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${(R=t==null?void 0:t.bot_status)!=null&&R.online?"bg-green-100":"bg-gray-100"}`,children:e.jsx(ba,{className:`w-5 h-5 ${(j=t==null?void 0:t.bot_status)!=null&&j.online?"text-green-600":"text-gray-400"}`})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s("dashboard.uptime")}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:(t==null?void 0:t.uptime)||"N/A"})]}),e.jsx(Ns,{className:"w-8 h-8 text-orange-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:`text-sm font-medium ${d?"text-green-600":"text-gray-500"}`,children:d?"":""})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:""})]}),(t==null?void 0:t.cpu)&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"CPU "})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[x.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.cpu.cores,"   ",t.cpu.frequency]})]}),(t==null?void 0:t.memory)&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[m.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.memory.used.toFixed(0)," MB / ",t.memory.total.toFixed(0)," MB"]})]}),(t==null?void 0:t.disk)&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(t.disk.percent||0).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${t.disk.percent||0}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.disk.used.toFixed(1)," GB / ",t.disk.total.toFixed(1)," GB (: ",t.disk.free.toFixed(1)," GB)"]})]}),(t==null?void 0:t.network)&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Mn,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:" I/O"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3 text-blue-500"}),e.jsx("span",{className:"text-gray-600",children:""})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.network.bytes_sent.toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-gray-600",children:""})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.network.bytes_recv.toFixed(2)," MB"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":  ",t.network.packets_sent.toLocaleString()," /  ",t.network.packets_recv.toLocaleString()]})]})]}),(t==null?void 0:t.disk_io)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ya,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:" I/O"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"w-3 h-3 text-blue-500"}),e.jsx("span",{className:"text-gray-600",children:""})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.disk_io.read_bytes.toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3 text-orange-500"}),e.jsx("span",{className:"text-gray-600",children:""})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.disk_io.write_bytes.toFixed(2)," MB"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":  ",t.disk_io.read_count.toLocaleString(),"  /  ",t.disk_io.write_count.toLocaleString()," "]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Dn,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[(t==null?void 0:t.versions)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.framework})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"WebUI "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.webui})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"OneBot "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.onebot})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Python "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.python})]}),t.versions.typescript&&e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"TypeScript "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.typescript})]}),t.versions.react&&e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"React "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.react})]}),t.versions.vite&&e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Vite "})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.versions.vite})]})]}),(t==null?void 0:t.system)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.system.platform})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-xs",children:t.system.platform_version})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.system.architecture})]})]})]})]})]})]})}function cc({pluginName:s,isOpen:t,onClose:a,onSave:r}){const[n,i]=b.useState({}),[l,o]=b.useState(null),[c,d]=b.useState(!0),[m,x]=b.useState(!1);b.useEffect(()=>{t&&s&&g()},[t,s]);const g=async()=>{try{d(!0);const h=await T.getPluginConfigSchema(s);o(h);let p=h.current_config||h.default_config||{};h.config_schema&&Object.keys(h.config_schema).forEach(u=>{if(h.config_schema[u].type==="array")if(!(u in p))p[u]=[];else if(typeof p[u]=="string"){const k=p[u].trim();k?p[u]=k.split(/[\n,\s]+/).filter(_=>_.trim()):p[u]=[]}else Array.isArray(p[u])||(p[u]=[])}),i(p)}catch(h){console.error("Failed to load config schema:",h)}finally{d(!1)}},y=async()=>{var h,p;x(!0);try{await T.updatePluginConfig(s,n),await g(),r(n),a()}catch(u){alert(((p=(h=u.response)==null?void 0:h.data)==null?void 0:p.detail)||"")}finally{x(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[": ",s]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Os,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l&&l.config_schema?e.jsx("div",{className:"space-y-4",children:Object.entries(l.config_schema).map(([h,p])=>{var u;return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.label||h,p.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),p.description&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:p.description}),p.type==="string"&&e.jsx("input",{type:"text",value:n[h]||"",onChange:w=>i({...n,[h]:w.target.value}),className:"input w-full",required:p.required}),p.type==="number"&&e.jsx("input",{type:"number",value:n[h]??"",onChange:w=>{var _;const k=w.target.value;if(k===""){const S=((_=l==null?void 0:l.default_config)==null?void 0:_[h])??n[h]??0;i({...n,[h]:S})}else{const S=Number(k);isNaN(S)||i({...n,[h]:S})}},className:"input w-full",required:p.required}),p.type==="boolean"&&e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n[h]||!1,onChange:w=>i({...n,[h]:w.target.checked}),className:"rounded border-gray-300 text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:""})]}),p.type==="select"&&e.jsx("select",{value:n[h]||"",onChange:w=>i({...n,[h]:w.target.value}),className:"input w-full",required:p.required,children:(u=p.options)==null?void 0:u.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),p.type==="textarea"&&e.jsx("textarea",{value:n[h]||"",onChange:w=>i({...n,[h]:w.target.value}),className:"input w-full",rows:4,required:p.required}),p.type==="array"&&e.jsxs("div",{className:"space-y-2",children:[!n[h]||!Array.isArray(n[h])||n[h].length===0?e.jsx("div",{className:"text-sm text-gray-500 py-2 border border-dashed border-gray-300 rounded p-3 text-center",children:'""'}):(n[h]||[]).map((w,k)=>{var _;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:w||"",onChange:S=>{const R=[...Array.isArray(n[h])?n[h]:[]];R[k]=S.target.value,i({...n,[h]:R})},className:"input flex-1",placeholder:((_=p.items)==null?void 0:_.type)==="string"?"QQ":""}),e.jsx("button",{type:"button",onClick:()=>{const A=[...Array.isArray(n[h])?n[h]:[]];A.splice(k,1),i({...n,[h]:A})},className:"btn btn-secondary px-3 py-1 text-sm hover:bg-red-50 hover:text-red-600",children:""})]},k)}),e.jsxs("button",{type:"button",onClick:()=>{const w=Array.isArray(n[h])?n[h]:[];i({...n,[h]:[...w,""]})},className:"btn btn-primary text-sm flex items-center gap-2 w-full justify-center py-2",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:""})]})]})]},h)})}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:""})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:a,className:"btn btn-secondary",children:""}),e.jsxs("button",{onClick:y,disabled:m,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),m?"...":""]})]})]})}):null}function dc({isOpen:s,onClose:t,onSuccess:a}){const[r,n]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(""),[d,m]=b.useState(!1),x=async()=>{var g,y;if(!r){c("");return}l(!0),c(""),m(!1);try{await T.uploadPlugin(r),m(!0),setTimeout(()=>{a(),t(),n(null),m(!1)},1500)}catch(h){c(((y=(g=h.response)==null?void 0:g.data)==null?void 0:y.detail)||"")}finally{l(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Os,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:d?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ZIP "}),e.jsx("input",{type:"file",accept:".zip",onChange:g=>{var y;return n(((y=g.target.files)==null?void 0:y[0])||null)},className:"input w-full"})]}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o})]})}),!d&&e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:t,className:"btn btn-secondary",disabled:i,children:""}),e.jsxs("button",{onClick:x,disabled:i||!r,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(gt,{className:"w-4 h-4"}),i?"...":""]})]})]})}):null}function uc(){const{t:s}=Te(),[t,a]=b.useState([]),[r,n]=b.useState(!1),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,m]=b.useState(!1),[x,g]=b.useState(null);b.useEffect(()=>{(async()=>{await y(),l(!1)})()},[]);const y=async()=>{try{n(!0);const u=await T.getPlugins();console.log("Loaded plugins:",u),a(u)}catch(u){console.error("Failed to load plugins:",u)}finally{n(!1)}},h=async(u,w)=>{var k,_;c(u);try{await T.pluginAction(u,w),await y()}catch(S){alert(((_=(k=S.response)==null?void 0:k.data)==null?void 0:_.detail)||s("plugins.actionFailed"))}finally{c(null)}},p=async u=>{var w,k;if(confirm(` "${u}" `)){c(u);try{await T.deletePlugin(u),await y(),alert(` "${u}" `)}catch(_){alert(((k=(w=_.response)==null?void 0:w.data)==null?void 0:k.detail)||"")}finally{c(null)}}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-shrink",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("plugins.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s("plugins.description")})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>m(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(gt,{className:"w-4 h-4"}),s("plugins.uploadPlugin")]}),e.jsxs("button",{onClick:y,className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4"}),s("common.refresh")]})]})]}),t.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:e.jsx(Oe,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("plugins.noPlugins")}),e.jsx("p",{className:"text-gray-500 mb-4",children:s("plugins.noPluginsDescription")}),e.jsxs("button",{onClick:()=>m(!0),className:"btn btn-primary flex items-center gap-2 mx-auto",children:[e.jsx(gt,{className:"w-4 h-4"}),s("plugins.uploadPlugin")]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>{var w,k,_,S,A,R,j;return e.jsxs("div",{className:"card flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-h-[80px]",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:u.name}),(((w=u.metadata)==null?void 0:w.description)||u.description)&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:((k=u.metadata)==null?void 0:k.description)||u.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(((_=u.metadata)==null?void 0:_.version)||u.version)&&e.jsxs("span",{children:["v",((S=u.metadata)==null?void 0:S.version)||u.version]}),(((A=u.metadata)==null?void 0:A.author)||u.author)&&e.jsxs(e.Fragment,{children:[(((R=u.metadata)==null?void 0:R.version)||u.version)&&e.jsx("span",{children:""}),e.jsx("span",{children:((j=u.metadata)==null?void 0:j.author)||u.author})]})]}),u.adapter&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s("plugins.adapter"),": ",e.jsx("span",{className:"font-medium",children:u.adapter})]})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium flex-shrink-0 h-fit ${u.enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:u.enabled?s("common.enabled"):s("common.disabled")})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[u.enabled===!0?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>h(u.name,"reload"),disabled:o===u.name||r,className:"btn btn-secondary flex-1 flex items-center justify-center gap-2 text-sm",children:[e.jsx(Na,{className:"w-4 h-4"}),s("plugins.reload")]}),e.jsxs("button",{onClick:()=>h(u.name,"disable"),disabled:o===u.name||r,className:"btn btn-secondary flex-1 flex items-center justify-center gap-2 text-sm",children:[e.jsx(Un,{className:"w-4 h-4"}),s("plugins.disable")]})]}):e.jsxs("button",{onClick:()=>h(u.name,"enable"),disabled:o===u.name||r,className:"btn btn-primary flex-1 flex items-center justify-center gap-2 text-sm",children:[e.jsx(zn,{className:"w-4 h-4"}),s("plugins.enable")]}),e.jsx("button",{onClick:()=>g(u.name),disabled:r,className:"btn btn-secondary p-2",title:"",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(u.name),disabled:o===u.name||r,className:"btn btn-danger p-2",title:"",children:e.jsx(bt,{className:"w-4 h-4"})})]})]},u.name)})}),e.jsx(dc,{isOpen:d,onClose:()=>m(!1),onSuccess:y}),e.jsx(cc,{pluginName:x||"",isOpen:x!==null,onClose:()=>g(null),onSave:y})]})}function mc(){const{t:s}=Te(),[t,a]=b.useState(null),[r,n]=b.useState(!0),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,m]=b.useState("");b.useEffect(()=>{x()},[]);const x=async()=>{try{const y=await T.getOneBotConfig(),h=y.connection_type||"ws_forward";a({onebot_enabled:!0,onebot_version:y.version||"v11",onebot_connection_type:h,onebot_ws_url:y.ws_url||"",onebot_ws_reverse_host:y.ws_reverse_host||"",onebot_ws_reverse_port:y.ws_reverse_port||8080,onebot_http_url:y.http_url||"",onebot_access_token:y.access_token||""})}catch(y){console.error("Failed to load config:",y)}finally{n(!1)}},g=async y=>{var h,p;if(y.preventDefault(),!!t){l(!0),c(!1),m("");try{const u={version:t.onebot_version,connection_type:t.onebot_connection_type,ws_url:t.onebot_ws_url,ws_reverse_host:t.onebot_ws_reverse_host,ws_reverse_port:t.onebot_ws_reverse_port,http_url:t.onebot_http_url,access_token:t.onebot_access_token};await T.updateOneBotConfig(u),c(!0),await x(),setTimeout(()=>c(!1),3e3)}catch(u){m(((p=(h=u.response)==null?void 0:h.data)==null?void 0:p.detail)||s("onebot.saveFailed"))}finally{l(!1)}}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?e.jsxs("div",{className:"space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("onebot.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s("onebot.description")})]}),e.jsxs("form",{onSubmit:g,className:"card space-y-6",children:[o&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:s("onebot.saveSuccess")}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("span",{children:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"OneBot "}),e.jsxs("select",{value:t.onebot_version||"v11",onChange:y=>a({...t,onebot_version:y.target.value}),className:"input",children:[e.jsx("option",{value:"v11",children:"v11"}),e.jsx("option",{value:"v12",children:"v12"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:""}),e.jsxs("select",{value:t.onebot_connection_type||"ws_forward",onChange:y=>a({...t,onebot_connection_type:y.target.value}),className:"input",children:[e.jsx("option",{value:"ws_forward",children:" WebSocket (ws)"}),e.jsx("option",{value:"ws_reverse",children:" WebSocket (ws_reverse)"}),e.jsx("option",{value:"http",children:"HTTP"})]})]}),(t.onebot_connection_type==="ws_forward"||!t.onebot_connection_type)&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WebSocket URL"}),e.jsx("input",{type:"text",value:t.onebot_ws_url||"",onChange:y=>a({...t,onebot_ws_url:y.target.value}),placeholder:"ws://localhost:3001",className:"input"})]}),t.onebot_connection_type==="ws_reverse"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:" WS "}),e.jsx("input",{type:"text",value:t.onebot_ws_reverse_host||"",onChange:y=>a({...t,onebot_ws_reverse_host:y.target.value}),placeholder:"0.0.0.0",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:" WS "}),e.jsx("input",{type:"number",value:t.onebot_ws_reverse_port||8080,onChange:y=>a({...t,onebot_ws_reverse_port:parseInt(y.target.value)}),className:"input"})]})]}),t.onebot_connection_type==="http"&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"HTTP URL"}),e.jsx("input",{type:"text",value:t.onebot_http_url||"",onChange:y=>a({...t,onebot_http_url:y.target.value}),placeholder:"http://localhost:5700",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Access Token ()"}),e.jsx("input",{type:"text",value:t.onebot_access_token||"",onChange:y=>a({...t,onebot_access_token:y.target.value}),placeholder:"your-access-token",className:"input"})]}),e.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),s(i?"common.loading":"common.save")]})]})]}):e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(Oe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("onebot.loadFailed")})]})}function xc(){const[s,t]=b.useState([]),[a,r]=b.useState(null),[n,i]=b.useState([]),[l,o]=b.useState(""),[c,d]=b.useState(!0),[m,x]=b.useState(!1),[g,y]=b.useState(""),[h,p]=b.useState("all"),[u,w]=b.useState({}),[k,_]=b.useState(Date.now()),S=b.useRef(new Set),A=b.useRef(null),R=b.useRef(null),j=b.useRef(0);b.useEffect(()=>{Y()},[]),b.useEffect(()=>{const E=async()=>{try{const $=await T.getMessageLog(50),F=$.filter(K=>new Date(K.timestamp||K.time).getTime()>k),W={};F.forEach(K=>{if(K.is_system||K.is_self)return;const H=K.message_type==="group"?`group-${K.group_id}`:`private-${K.user_id}`;if(!S.current.has(H)){if(a){const Q=`${a.type}-${a.id}`;if(H===Q)return}W[H]=(W[H]||0)+1}}),w(K=>{const H={...K};return Object.keys(W).forEach(Q=>{H[Q]=(H[Q]||0)+W[Q]}),H}),_(Date.now()),t(K=>K.map(Q=>{var X;const v=`${Q.type}-${Q.id}`,P=$.filter(re=>re.message_type==="group"&&Q.type==="group"?re.group_id===Q.id:re.message_type==="private"&&Q.type==="private"?re.user_id===Q.id:!1);if(P.length>0){const re=P[0];return{...Q,lastMessageTime:new Date(re.timestamp).getTime(),lastMessage:(X=re.message)==null?void 0:X.substring(0,30),unread:W[v]||0}}return Q}).sort((Q,v)=>{const P=Q.lastMessageTime||0;return(v.lastMessageTime||0)-P}))}catch($){console.error("Failed to check new messages:",$)}};E();const L=setInterval(E,3e3);return()=>clearInterval(L)},[a]),b.useEffect(()=>{if(a){te(a,!0),j.current=0;const E=setInterval(()=>{te(a,!1)},2e3);return()=>clearInterval(E)}},[a]),b.useEffect(()=>{n.length>j.current&&j.current>0?I("smooth"):n.length>0&&j.current===0&&I("instant"),j.current=n.length},[n]);const I=(E="smooth")=>{var L,$;E==="instant"?(L=A.current)==null||L.scrollIntoView({behavior:"auto"}):($=A.current)==null||$.scrollIntoView({behavior:"smooth"})},Y=async()=>{d(!0);try{const E=await T.getChatContacts(),L=[...E.groups.map($=>({id:$.id,name:$.name,avatar:$.avatar,type:"group",member_count:$.member_count,max_member_count:$.max_member_count})),...E.friends.map($=>({id:$.id,name:$.name,avatar:$.avatar,type:"private",remark:$.remark}))];t(L)}catch(E){console.error("Failed to load contacts:",E)}finally{d(!1)}},te=async(E,L=!0)=>{L&&d(!0);try{const $=await T.getChatHistory(E.type,E.id,50);i($)}catch($){console.error("Failed to load messages:",$)}finally{L&&d(!1)}},Z=async()=>{var L,$;if(!l.trim()||!a||m)return;x(!0);const E=l.trim();try{const F=await T.sendChatMessage({type:a.type,id:a.id,message:E});console.log("Message sent successfully:",F),o(""),setTimeout(()=>{te(a,!1)},300)}catch(F){console.error("Send message error:",F),alert((($=(L=F.response)==null?void 0:L.data)==null?void 0:$.detail)||"")}finally{x(!1)}},U=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),Z())},se=s.filter(E=>{const L=E.name.toLowerCase().includes(g.toLowerCase()),$=h==="all"||E.type===h;return L&&$}),J=E=>{const L=new Date(E),F=new Date().getTime()-L.getTime();return F<6e4?"":F<36e5?`${Math.floor(F/6e4)}`:F<864e5?L.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):L.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return c&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"flex h-[calc(100vh-4rem)] bg-gray-50 overflow-hidden",children:[e.jsxs("div",{className:`w-full md:w-80 bg-white md:border-r border-gray-200 flex flex-col ${a?"hidden md:flex":"flex"}`,children:[e.jsxs("div",{className:"p-3 md:p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"...",value:g,onChange:E=>y(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm md:text-base"})]}),e.jsxs("div",{className:"flex gap-1 md:gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>p("all"),className:`flex-1 px-2 md:px-3 py-1.5 text-xs md:text-sm rounded-lg transition-colors ${h==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:""}),e.jsxs("button",{onClick:()=>p("group"),className:`flex-1 px-2 md:px-3 py-1.5 text-xs md:text-sm rounded-lg transition-colors flex items-center justify-center gap-1 ${h==="group"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ye,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("button",{onClick:()=>p("private"),className:`flex-1 px-2 md:px-3 py-1.5 text-xs md:text-sm rounded-lg transition-colors flex items-center justify-center gap-1 ${h==="private"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(zt,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:Y,className:"px-2 md:px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors flex-shrink-0",title:"",children:e.jsx(et,{className:"w-3 h-3 md:w-3.5 md:h-3.5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:se.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(Xe,{className:"w-12 h-12 mb-2"}),e.jsx("p",{className:"text-sm",children:""})]}):se.map(E=>{const L=`${E.type}-${E.id}`,$=u[L]||0;return e.jsxs("div",{onClick:()=>{r(E),S.current.add(L),w(F=>{const W={...F};return delete W[L],W})},className:`flex items-center gap-3 p-3 md:p-4 cursor-pointer border-b border-gray-100 hover:bg-gray-50 active:bg-gray-100 transition-colors ${(a==null?void 0:a.id)===E.id&&(a==null?void 0:a.type)===E.type?"bg-primary-50":""}`,children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:E.avatar,alt:E.name,className:"w-12 h-12 rounded-full object-cover",onError:F=>{F.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="48" height="48"%3E%3Crect width="48" height="48" fill="%23e5e7eb"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af" font-size="16"%3E%3C/text%3E%3C/svg%3E'}}),$>0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1 shadow-lg",children:$>99?"99+":$})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:E.name}),E.type==="group"&&e.jsx(Ye,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})]}),E.lastMessage?e.jsx("p",{className:"text-xs text-gray-500 truncate",children:E.lastMessage}):E.type==="group"&&E.member_count?e.jsxs("p",{className:"text-xs text-gray-500",children:[E.member_count," "]}):E.remark?e.jsx("p",{className:"text-xs text-gray-500 truncate",children:E.remark}):e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",E.id]})]})]},L)})})]}),e.jsx("div",{className:`flex-1 flex flex-col ${a?"flex w-full":"hidden md:flex"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 md:px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:"",children:e.jsx(Bn,{className:"w-5 h-5 text-gray-600"})}),e.jsx("img",{src:a.avatar,alt:a.name,className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"font-semibold text-gray-900 truncate",children:a.name}),a.type==="group"&&a.member_count&&e.jsxs("p",{className:"text-xs text-gray-500",children:[a.member_count," "]})]})]}),e.jsx("button",{onClick:()=>te(a),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:"",children:e.jsx(et,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{ref:R,className:"flex-1 overflow-y-auto p-3 md:p-6 space-y-3 md:space-y-4 bg-gray-50",children:[n.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsx("p",{children:""})}):n.map(E=>{var F,W;const L=((F=E.sender)==null?void 0:F.card)||((W=E.sender)==null?void 0:W.nickname)||`${E.user_id}`,$=a.type==="group";return e.jsxs("div",{className:`flex gap-2 md:gap-3 ${E.is_self?"flex-row-reverse":""}`,children:[e.jsx("img",{src:`http://q.qlogo.cn/headimg_dl?dst_uin=${E.user_id}&spec=640`,alt:L,className:"w-8 h-8 md:w-10 md:h-10 rounded-full object-cover flex-shrink-0",onError:K=>{K.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="40" height="40"%3E%3Crect width="40" height="40" fill="%23e5e7eb"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af" font-size="14"%3E%3C/text%3E%3C/svg%3E'}}),e.jsxs("div",{className:`flex-1 min-w-0 ${E.is_self?"flex flex-col items-end":""}`,children:[$&&!E.is_self&&e.jsxs("p",{className:"text-xs text-gray-500 mb-1 truncate",children:[L,e.jsxs("span",{className:"text-gray-400 ml-1",children:["(",E.user_id,")"]})]}),e.jsx("div",{className:`inline-block max-w-[85%] md:max-w-xl px-3 md:px-4 py-2 rounded-lg text-sm md:text-base ${E.is_self?"bg-primary-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words",children:E.message})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:J(E.timestamp)})]})]},E.id)}),e.jsx("div",{ref:A})]}),e.jsxs("div",{className:"bg-white border-t border-gray-200 p-3 md:p-4",children:[e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsx("textarea",{value:l,onChange:E=>o(E.target.value),onKeyPress:U,placeholder:"...",className:"flex-1 px-3 md:px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm md:text-base",rows:2,disabled:m}),e.jsxs("button",{onClick:Z,disabled:!l.trim()||m,className:"px-3 md:px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-1 md:gap-2 h-fit min-w-[60px] md:min-w-[80px]",children:[e.jsx(br,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:m?"":""})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2 hidden md:block",children:"Enter Shift+Enter "})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("p",{className:"text-lg",children:""}),e.jsx("p",{className:"text-sm mt-2",children:""})]})})})]})}function hc(){const{t:s}=Te(),[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(!1),[o,c]=b.useState(100),[d,m]=b.useState(!0),[x,g]=b.useState("all");b.useEffect(()=>{y();let u=null;return d&&(u=setInterval(y,5e3)),()=>{u&&clearInterval(u)}},[o,d]);const y=async(u=!1)=>{u?l(!0):t.length===0&&n(!0);try{const w=await T.getMessageLog(o);a(w)}catch(w){console.error("Failed to load messages:",w)}finally{n(!1),l(!1)}},h=u=>{if(!u)return"Invalid Date";try{const w=new Date(u);return isNaN(w.getTime())?u:w.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return u||"Invalid Date"}},p=t.filter(u=>x==="all"?!0:(u.event_type||"message")===x);return r&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"h-full flex flex-col space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-shrink",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("messages.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-nowrap flex-shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer whitespace-nowrap",children:[e.jsx("span",{children:""}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 flex-shrink-0",style:{backgroundColor:d?"#3b82f6":"#d1d5db"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("select",{value:o,onChange:u=>c(Number(u.target.value)),className:"input py-2 text-sm min-w-[120px]",children:[e.jsx("option",{value:50,children:" 50 "}),e.jsx("option",{value:100,children:" 100 "}),e.jsx("option",{value:200,children:" 200 "}),e.jsx("option",{value:500,children:" 500 "})]}),e.jsxs("button",{onClick:()=>y(!0),disabled:i,className:"btn btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:[e.jsx(et,{className:`w-4 h-4 ${i?"animate-spin":""}`}),e.jsx("span",{children:""})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" (",t.length,")"]}),e.jsxs("button",{onClick:()=>g("message"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${x==="message"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Xe,{className:"w-4 h-4"})," (",t.filter(u=>!u.is_system).length,")"]}),e.jsxs("button",{onClick:()=>g("notice"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${x==="notice"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(va,{className:"w-4 h-4"})," (",t.filter(u=>u.event_type==="notice").length,")"]}),e.jsxs("button",{onClick:()=>g("request"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${x==="request"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(wa,{className:"w-4 h-4"})," (",t.filter(u=>u.event_type==="request").length,")"]})]}),e.jsx("div",{className:"space-y-3",children:p.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["",x==="all"?"":x==="message"?"":x==="notice"?"":""]}),e.jsxs("p",{className:"text-gray-500",children:["",x==="all"?"":x==="message"?"":x==="notice"?"":""]})]}):p.map((u,w)=>{var A,R,j,I;const k=u.is_system||u.event_type==="notice"||u.event_type==="request",_=u.event_type||"message";if(k)return e.jsx("div",{className:"card hover:shadow-md transition-shadow bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-white",children:_==="request"?e.jsx(wa,{className:"w-6 h-6"}):e.jsx(va,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-orange-900",children:_==="notice"?"":_==="request"?"":""}),u.group_id&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-700 bg-orange-100 px-2 py-1 rounded",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsxs("span",{children:[" ",u.group_id]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-700",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:h(u.time||u.timestamp)})]})]}),e.jsx("p",{className:"text-orange-900 font-medium break-words whitespace-pre-wrap",children:u.message||u.raw_message})]})]})},u.id||w);const S=u.is_self||!1;return e.jsx("div",{className:`card hover:shadow-md transition-shadow ${S?"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-400":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold ${S?"bg-gradient-to-br from-green-400 to-blue-500":"bg-gradient-to-br from-blue-400 to-purple-600"}`,children:((j=(R=(A=u.sender)==null?void 0:A.nickname)==null?void 0:R[0])==null?void 0:j.toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsxs("span",{className:`font-medium ${S?"text-green-900":"text-gray-900"}`,children:[((I=u.sender)==null?void 0:I.nickname)||`User ${u.user_id}`,S&&e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"()"})]}),u.message_type==="group"?e.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${S?"text-green-700 bg-green-100":"text-gray-500 bg-blue-50"}`,children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsxs("span",{children:[" ",u.group_id]})]}):e.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${S?"text-green-700 bg-green-100":"text-gray-500 bg-purple-50"}`,children:[e.jsx(zt,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:`flex items-center gap-1 text-xs ${S?"text-green-700":"text-gray-500"}`,children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:h(u.time||u.timestamp)})]})]}),e.jsx("p",{className:`break-words whitespace-pre-wrap ${S?"text-green-900 font-medium":"text-gray-700"}`,children:u.message||u.raw_message})]})]})},u.id||w)})})]})}function pc(){const{t:s}=Te();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s("security.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:s("security.description")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ye,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("security.users")})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("security.usersDesc")})]}),e.jsxs("div",{className:"card hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(qn,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("security.permissions")})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("security.permissionsDesc")})]}),e.jsxs("div",{className:"card hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Hn,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("security.roles")})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("security.rolesDesc")})]})]}),e.jsx("div",{className:"card",children:e.jsx("p",{className:"text-gray-600",children:s("security.developing")})})]})}function gc(){const{t:s}=Te(),[t,a]=b.useState([]),[r,n]=b.useState(!0),[i,l]=b.useState(!1),[o,c]=b.useState(100),[d,m]=b.useState("all"),[x,g]=b.useState(!1);b.useEffect(()=>{y()},[o,d]),b.useEffect(()=>{if(x){const _=setInterval(()=>{y(!0)},5e3);return()=>clearInterval(_)}},[x]);const y=async(_=!1)=>{_?l(!0):n(!0);try{const S=await T.getSystemLogs(o);a(S)}catch(S){console.error("Failed to load system logs:",S)}finally{n(!1),l(!1)}},h=_=>{try{const S=new Date(_),A=S.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),R=S.getMilliseconds().toString().padStart(3,"0");return`${A}.${R}`}catch{return _}},p=_=>{const S=_.toLowerCase();return S==="error"||S==="critical"?e.jsx(us,{className:"w-4 h-4 text-red-500"}):S==="warning"?e.jsx(Sa,{className:"w-4 h-4 text-yellow-500"}):S==="info"?e.jsx(ds,{className:"w-4 h-4 text-blue-500"}):S==="debug"?e.jsx(Oe,{className:"w-4 h-4 text-gray-500"}):e.jsx(ds,{className:"w-4 h-4 text-gray-500"})},u=_=>{const S=_.toLowerCase();return S==="error"||S==="critical"?"bg-red-100 text-red-700 border-red-200":S==="warning"?"bg-yellow-100 text-yellow-700 border-yellow-200":S==="info"?"bg-blue-100 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-200"},w=t.filter(_=>d==="all"?!0:_.level.toLowerCase()===d),k={all:t.length,debug:t.filter(_=>_.level.toLowerCase()==="debug").length,info:t.filter(_=>_.level.toLowerCase()==="info").length,warning:t.filter(_=>_.level.toLowerCase()==="warning").length,error:t.filter(_=>_.level.toLowerCase()==="error").length,critical:t.filter(_=>_.level.toLowerCase()==="critical").length};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-shrink",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("systemLog.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s("systemLog.description")})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:d,onChange:_=>m(_.target.value),className:"input py-2 text-sm min-w-[120px] max-w-[140px]",children:[e.jsx("option",{value:"all",children:""}),e.jsx("option",{value:"debug",children:"DEBUG"}),e.jsx("option",{value:"info",children:"INFO"}),e.jsx("option",{value:"warning",children:"WARNING"}),e.jsx("option",{value:"error",children:"ERROR"}),e.jsx("option",{value:"critical",children:"CRITICAL"})]})}),e.jsxs("select",{value:o,onChange:_=>c(Number(_.target.value)),className:"input py-2 text-sm min-w-[120px] max-w-[140px]",children:[e.jsx("option",{value:50,children:" 50 "}),e.jsx("option",{value:100,children:" 100 "}),e.jsx("option",{value:200,children:" 200 "}),e.jsx("option",{value:500,children:" 500 "}),e.jsx("option",{value:1e3,children:" 1000 "})]}),e.jsxs("button",{onClick:()=>g(!x),className:`btn ${x?"btn-primary":"btn-secondary"} flex items-center gap-2 whitespace-nowrap text-sm`,children:[e.jsx(et,{className:`w-4 h-4 ${x?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:x?"":""}),e.jsx("span",{className:"sm:hidden",children:x?"":""})]}),e.jsxs("button",{onClick:()=>y(!0),disabled:i,className:"btn btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap text-sm",children:[e.jsx(et,{className:`w-4 h-4 ${i?"animate-spin":""}`}),e.jsx("span",{children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:k.all})]}),e.jsx(Ut,{className:"w-8 h-8 text-gray-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"DEBUG"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 mt-1",children:k.debug})]}),e.jsx(Oe,{className:"w-8 h-8 text-gray-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"INFO"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:k.info})]}),e.jsx(ds,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"WARNING"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:k.warning})]}),e.jsx(Sa,{className:"w-8 h-8 text-yellow-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ERROR"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:k.error})]}),e.jsx(us,{className:"w-8 h-8 text-red-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"CRITICAL"}),e.jsx("p",{className:"text-2xl font-bold text-red-700 mt-1",children:k.critical})]}),e.jsx(us,{className:"w-8 h-8 text-red-700"})]})})]}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"sticky top-0 bg-gray-50 z-10",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:""}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:""}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:""}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 text-sm",children:""})]})}),e.jsx("tbody",{children:w.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"text-center py-12 text-gray-500",children:[e.jsx(Ut,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:""})]})}):w.map((_,S)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 font-mono whitespace-nowrap",children:h(_.timestamp)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p(_.level),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${u(_.level)}`,children:_.level.toUpperCase()})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 font-mono",children:_.logger||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("div",{className:"break-words",children:_.message||JSON.stringify(_)}),_.exception&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-red-600 cursor-pointer",children:""}),e.jsx("pre",{className:"mt-2 text-xs bg-red-50 p-2 rounded overflow-x-auto",children:_.exception})]})]})})]},S))})]})})})]})}function fc(){var K,H,Q,v;const{t:s}=Te(),[t,a]=b.useState(null),[r,n]=b.useState(!0),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,m]=b.useState(""),[x,g]=b.useState(!1),[y,h]=b.useState(""),[p,u]=b.useState(""),[w,k]=b.useState(!1),[_,S]=b.useState(!1),[A,R]=b.useState(""),[j,I]=b.useState(""),[Y,te]=b.useState(""),[Z,U]=b.useState(!1),[se,J]=b.useState(!0),[E,L]=b.useState(5);b.useEffect(()=>{$()},[]);const $=async()=>{try{const P=await T.getSystemConfig();a(P),P.tencent_cloud&&(I(P.tencent_cloud.secret_id||""),U(!1)),J(P.ai_thread_pool_enabled!==void 0?P.ai_thread_pool_enabled:!0),L(P.ai_thread_pool_workers||5)}catch(P){console.error("Failed to load system config:",P)}finally{n(!1)}},F=async P=>{var X,re;if(P.preventDefault(),!!t){l(!0),c(!1),m("");try{const je={web_ui_enabled:t.web_ui_enabled,debug:t.debug,log_level:t.log_level,ai_thread_pool_enabled:se,ai_thread_pool_workers:E};(j||Y)&&(je.tencent_cloud={secret_id:j,secret_key:Y||void 0}),await T.updateSystemConfig(je),c(!0),Y&&(te(""),U(!1)),await $(),setTimeout(()=>c(!1),3e3)}catch(je){m(((re=(X=je.response)==null?void 0:X.data)==null?void 0:re.detail)||s("system.saveFailed"))}finally{l(!1)}}},W=async P=>{var X,re;if(P.preventDefault(),y.length<6){R(s("system.passwordTooShort"));return}if(y!==p){R(s("system.passwordMismatch"));return}k(!0),R(""),S(!1);try{await T.resetAdminPassword({password:y}),S(!0),h(""),u(""),g(!1),setTimeout(()=>S(!1),3e3)}catch(je){R(((re=(X=je.response)==null?void 0:X.data)==null?void 0:re.detail)||s("system.passwordResetFailed"))}finally{k(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?e.jsxs("div",{className:"space-y-6 max-w-full overflow-x-hidden",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:s("system.title")}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s("system.description")})]}),e.jsxs("form",{onSubmit:F,className:"card space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Me,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("system.systemSettings")})]}),o&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:s("system.settingsSaved")})]}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("span",{children:d})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:s("system.webUIEnabled")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s("system.webUIEnabledDesc")})]}),e.jsx("button",{type:"button",onClick:()=>a({...t,web_ui_enabled:!t.web_ui_enabled}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",style:{backgroundColor:t.web_ui_enabled?"#3b82f6":"#d1d5db"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.web_ui_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:s("system.debugMode")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s("system.debugModeDesc")})]}),e.jsx("button",{type:"button",onClick:()=>a({...t,debug:!t.debug}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",style:{backgroundColor:t.debug?"#3b82f6":"#d1d5db"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.debug?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("system.logLevelLabel")}),e.jsxs("select",{value:t.log_level,onChange:P=>a({...t,log_level:P.target.value}),className:"input",children:[e.jsx("option",{value:"DEBUG",children:"DEBUG"}),e.jsx("option",{value:"INFO",children:"INFO"}),e.jsx("option",{value:"WARNING",children:"WARNING"}),e.jsx("option",{value:"ERROR",children:"ERROR"}),e.jsx("option",{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"AI"}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:""}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI"})]}),e.jsx("button",{type:"button",onClick:()=>J(!se),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",style:{backgroundColor:se?"#3b82f6":"#d1d5db"},children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${se?"translate-x-6":"translate-x-1"}`})})]}),se&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"label",children:""}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"1",max:"20",value:E,onChange:P=>L(parseInt(P.target.value)),className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium w-12 text-right",children:E})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1-205"})]})]}),e.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),s(i?"system.saving":"system.saveSettings")]})]}),e.jsxs("form",{onSubmit:F,className:"card space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Je,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"TTS"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["APIAI",e.jsx("a",{href:"https://cloud.tencent.com/document/api/1073/37995",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 ml-1 underline",children:""})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["SecretId ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:j,onChange:P=>I(P.target.value),placeholder:"SecretId",className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'"" > "API"'})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["SecretKey ",((K=t==null?void 0:t.tencent_cloud)==null?void 0:K.secret_key_set)&&!Z&&e.jsx("span",{className:"text-green-600 text-xs ml-2",children:"()"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:Z?"text":"password",value:Y,onChange:P=>te(P.target.value),placeholder:(H=t==null?void 0:t.tencent_cloud)!=null&&H.secret_key_set?"":"SecretKey",className:"input pr-10"}),((Q=t==null?void 0:t.tencent_cloud)==null?void 0:Q.secret_key_set)&&e.jsx("button",{type:"button",onClick:()=>U(!Z),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 text-sm",children:Z?"":""})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(v=t==null?void 0:t.tencent_cloud)!=null&&v.secret_key_set?"":" &gt; API"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:""}),""]})}),e.jsxs("button",{type:"submit",disabled:i||!j,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),i?"...":"TTS"]})]}),e.jsxs("div",{className:"card space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ms,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("system.adminPassword")})]}),_&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:s("system.passwordResetSuccess")})]}),A&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("span",{children:A})]}),x?e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("system.newPassword")}),e.jsx("input",{type:"password",value:y,onChange:P=>h(P.target.value),placeholder:s("system.newPasswordPlaceholder"),className:"input",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("system.confirmPassword")}),e.jsx("input",{type:"password",value:p,onChange:P=>u(P.target.value),placeholder:s("system.confirmPasswordPlaceholder"),className:"input",required:!0,minLength:6})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:w,className:"btn btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),s(w?"system.resetting":"system.confirmReset")]}),e.jsx("button",{type:"button",onClick:()=>{g(!1),h(""),u(""),R("")},className:"btn btn-secondary flex-1",children:s("common.cancel")})]})]}):e.jsxs("button",{onClick:()=>g(!0),className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),s("system.resetAdminPassword")]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Je,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("system.systemInfo")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:s("system.appName")}),e.jsx("span",{className:"font-medium",children:t.app_name})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:s("system.appVersion")}),e.jsx("span",{className:"font-medium",children:t.app_version})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:s("system.environment")}),e.jsx("span",{className:"font-medium",children:t.environment})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:s("system.pluginAutoLoad")}),e.jsx("span",{className:"font-medium",children:t.plugin_auto_load?s("common.yes"):s("common.no")})]})]})]})]}):e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(Oe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("system.loadConfigFailed")})]})}function tr(){const[s,t]=b.useState(!1),[a,r]=b.useState(""),[n,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState("command"),[m,x]=b.useState(!0),[g,y]=b.useState(!1),[h,p]=b.useState(!1),[u,w]=b.useState("voice_only"),[k,_]=b.useState(1),[S,A]=b.useState(!0),[R,j]=b.useState("AI"),[I,Y]=b.useState(1),[te,Z]=b.useState(!0),[U,se]=b.useState(!0),[J,E]=b.useState([]),[L,$]=b.useState(new Set),[F,W]=b.useState([]),[K,H]=b.useState([]),[Q,v]=b.useState(!0),[P,X]=b.useState(!1);b.useEffect(()=>{re()},[]);const re=async()=>{var C,ce,Ne,de,De,pe,it,St,lt,Ve,_t,Ct;try{v(!0);const[ee,kt,Et,ot,_e]=await Promise.all([T.getAIConfig("global"),T.listGroupConfigs(),T.listModels(),T.listPresets(),T.getChatContacts().catch(G=>(console.error("Failed to load contacts:",G),{groups:[],friends:[]}))]);t(ee.enabled||!1),r(ee.model_uuid||""),i(ee.preset_uuid||""),o(((C=ee.config)==null?void 0:C.trigger_command)||""),d(((ce=ee.config)==null?void 0:ce.trigger_mode)||"command"),x(((Ne=ee.config)==null?void 0:Ne.enable_streaming)!==void 0?ee.config.enable_streaming:!0),y(((de=ee.config)==null?void 0:de.tools_enabled)!==void 0?ee.config.tools_enabled:!1),p(((De=ee.config)==null?void 0:De.tts_mode_enabled)||!1),w(((pe=ee.config)==null?void 0:pe.tts_mode_type)||"voice_only"),_(((it=ee.config)==null?void 0:it.talk_value)!==void 0?ee.config.talk_value:1),A(((St=ee.config)==null?void 0:St.enable_RuaBot)!==void 0?ee.config.enable_RuaBot:!0),j(((lt=ee.config)==null?void 0:lt.bot_name)||"AI"),Y(((Ve=ee.config)==null?void 0:Ve.think_level)!==void 0?ee.config.think_level:1),Z(((_t=ee.config)==null?void 0:_t.enable_brain_mode)!==void 0?ee.config.enable_brain_mode:!0),se(((Ct=ee.config)==null?void 0:Ct.enable_learning)!==void 0?ee.config.enable_learning:!0),W(Et),H(ot),console.log("Loaded contacts:",_e),console.log("Loaded group configs:",kt);const ve=new Map,Pt=new Set;_e&&_e.groups&&_e.groups.forEach(G=>{const ne=String(G.id||G.group_id||"");ne&&Pt.add(ne)}),kt.forEach(G=>{const ne=!Pt.has(G.target_id),Ce=`http://p.qlogo.cn/gh/${G.target_id}/${G.target_id}/640/`;ve.set(G.target_id,{...G,group_name:G.group_name||` ${G.target_id}`,avatar:G.avatar||Ce,is_left:ne})}),_e&&_e.groups&&_e.groups.forEach(G=>{const ne=String(G.id||G.group_id||"");if(ne&&!ve.has(ne))ve.set(ne,{config_type:"group",target_id:ne,enabled:!1,model_uuid:null,preset_uuid:null,message_count:0,group_name:G.name||"",avatar:G.avatar||`http://p.qlogo.cn/gh/${ne}/${ne}/640/`,is_left:!1});else if(ne&&ve.has(ne)){const Ce=ve.get(ne);Ce.group_name=G.name||Ce.group_name||"",Ce.avatar=G.avatar||Ce.avatar||`http://p.qlogo.cn/gh/${ne}/${ne}/640/`,Ce.is_left=!1}});const D=Array.from(ve.values()).sort((G,ne)=>G.is_left!==ne.is_left?G.is_left?1:-1:G.target_id.localeCompare(ne.target_id));console.log("Final group configs:",D),E(D)}catch(ee){console.error("Failed to load data:",ee)}finally{v(!1)}},je=async()=>{try{X(!0);const C={};s!==void 0&&(C.enabled=s),a&&(C.model_uuid=a),n&&(C.preset_uuid=n);const ce=(await T.getAIConfig("global")).config||{};C.config={...ce,trigger_command:c==="command"&&l||void 0,trigger_mode:c,enable_streaming:m,tools_enabled:g,tts_mode_enabled:h,tts_mode_type:u,talk_value:k,enable_RuaBot:S,bot_name:R,think_level:I,enable_brain_mode:te,enable_learning:U},await T.updateAIConfig("global",void 0,C),alert("")}catch(C){console.error("Failed to save:",C),alert("")}finally{X(!1)}},Re=async(C,ce,Ne)=>{if(L.size===0){alert("");return}try{X(!0);const de={};C!==void 0&&(de.enabled=C),ce!==void 0&&(de.model_uuid=ce),Ne!==void 0&&(de.preset_uuid=Ne),await T.batchUpdateGroups(Array.from(L),de),await re(),$(new Set),alert("")}catch(de){console.error("Failed to batch update:",de),alert("")}finally{X(!1)}},ss=C=>{const ce=new Set(L);ce.has(C)?ce.delete(C):ce.add(C),$(ce)},wt=()=>{L.size===J.length?$(new Set):$(new Set(J.map(C=>C.target_id)))};return Q?e.jsx("div",{className:"text-center py-8",children:"..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:C=>t(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{children:"AI"})]}),e.jsxs("button",{onClick:je,disabled:P,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:[e.jsx(Ze,{className:"w-4 h-4"}),P?"...":""]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsxs("select",{value:a,onChange:C=>r(C.target.value),className:"w-full px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:""}),F.map(C=>e.jsxs("option",{value:C.uuid,children:[C.name," (",C.provider,")"]},C.uuid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsxs("select",{value:n,onChange:C=>i(C.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:""}),K.map(C=>e.jsx("option",{value:C.uuid,children:C.name},C.uuid))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"triggerMode",value:"command",checked:c==="command",onChange:C=>d(C.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"AI"}),c==="command"&&e.jsxs("div",{className:"ml-6 mt-2",children:[e.jsx("input",{type:"text",value:l,onChange:C=>o(C.target.value),placeholder:"@AI  /ai",className:"w-full px-3 py-2 border rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'AI"@AI""@AI "'})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"triggerMode",value:"maxtoken",checked:c==="maxtoken",onChange:C=>d(C.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"MaxToken"})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"AIAIAI"}),c==="maxtoken"&&e.jsxs("div",{className:"ml-6 mt-3 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:" (Talk Value)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:k,onChange:C=>_(parseFloat(C.target.value)),className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium w-16 text-right",children:k.toFixed(1)})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"AIMaxTokenAI0.0-1.01.00.550%"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:C=>x(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6",children:"AIAI"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:C=>y(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6",children:"AIAI"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:C=>p(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"TTS"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6 mb-3",children:"AIAI"}),h&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"TTS"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"ttsModeType",value:"voice_only",checked:u==="voice_only",onChange:C=>w(C.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"ttsModeType",value:"text_and_voice",checked:u==="text_and_voice",onChange:C=>w(C.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"+"})]})]})]})]}),c==="maxtoken"&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"RuaBot "}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"RuaBot  AI  MaxToken "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:C=>A(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:" RuaBot"})]}),e.jsx("p",{className:"text-sm text-gray-500 ml-6",children:" RuaBot "})]}),S&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"ml-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("input",{type:"text",value:R,onChange:C=>j(C.target.value),placeholder:"AI",className:"w-full px-3 py-2 border rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI AI"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:" (Think Level)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"1",step:"1",value:I,onChange:C=>Y(parseInt(C.target.value)),className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium w-16 text-right",children:I===0?"":""})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"0 = / 1 = "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:te,onChange:C=>Z(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:" Brain Planner"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:" ReAct reply/wait/complete_talkAI "})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:C=>se(C.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:""})]})]})})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:wt,className:"text-sm text-blue-500 hover:text-blue-600",children:L.size===J.length?"":""}),e.jsxs("span",{className:"text-sm text-gray-500",children:[" ",L.size," "]})]})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Re(!0),disabled:L.size===0||P,className:"px-3 sm:px-4 py-2 text-sm sm:text-base bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 whitespace-nowrap",children:""}),e.jsx("button",{onClick:()=>Re(!1),disabled:L.size===0||P,className:"px-3 sm:px-4 py-2 text-sm sm:text-base bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 whitespace-nowrap",children:""}),e.jsxs("select",{onChange:C=>{C.target.value&&(Re(void 0,C.target.value,void 0),C.target.value="")},disabled:L.size===0||P,className:"px-2 sm:px-3 py-2 text-sm sm:text-base border rounded-lg disabled:opacity-50 min-w-0 flex-1 sm:flex-initial sm:min-w-[140px]",children:[e.jsx("option",{value:"",children:""}),F.map(C=>e.jsx("option",{value:C.uuid,children:C.name},C.uuid))]}),e.jsxs("select",{onChange:C=>{C.target.value&&(Re(void 0,void 0,C.target.value),C.target.value="")},disabled:L.size===0||P,className:"px-2 sm:px-3 py-2 text-sm sm:text-base border rounded-lg disabled:opacity-50 min-w-0 flex-1 sm:flex-initial sm:min-w-[140px]",children:[e.jsx("option",{value:"",children:""}),K.map(C=>e.jsx("option",{value:C.uuid,children:C.name},C.uuid))]})]}),e.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:e.jsxs("table",{className:"w-full min-w-[600px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2 sm:p-3",children:e.jsx("input",{type:"checkbox",checked:L.size===J.length&&J.length>0,onChange:wt,className:"w-4 h-4"})}),e.jsx("th",{className:"text-left p-2 sm:p-3",children:""}),e.jsx("th",{className:"text-left p-2 sm:p-3",children:""}),e.jsx("th",{className:"text-left p-2 sm:p-3 hidden md:table-cell",children:""}),e.jsx("th",{className:"text-left p-2 sm:p-3 hidden lg:table-cell",children:""}),e.jsx("th",{className:"text-left p-2 sm:p-3",children:""})]})}),e.jsx("tbody",{children:J.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center p-8 text-gray-500",children:"OneBot"})}):J.map(C=>{var ce,Ne,de,De;return e.jsxs("tr",{className:`border-b hover:bg-gray-50 ${C.is_left?"opacity-60":""}`,children:[e.jsx("td",{className:"p-2 sm:p-3",children:e.jsx("input",{type:"checkbox",checked:L.has(C.target_id),onChange:()=>ss(C.target_id),className:"w-4 h-4",disabled:C.is_left})}),e.jsx("td",{className:"p-2 sm:p-3 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:C.avatar||`http://p.qlogo.cn/gh/${C.target_id}/${C.target_id}/640/`,alt:C.group_name||C.target_id,className:"w-10 h-10 rounded flex-shrink-0",onError:pe=>{pe.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAxMkMxNS41ODIyIDEyIDEyIDE1LjU4MjIgMTIgMjBDMTIgMjQuNDE3OCAxNS41ODIyIDI4IDIwIDI4QzI0LjQxNzggMjggMjggMjQuNDE3OCAyOCAyMEMyOCAxNS41ODIyIDI0LjQxNzggMTIgMjAgMTJaIiBmaWxsPSIjOUI5QkE1Ii8+Cjwvc3ZnPg=="}}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium truncate",children:C.group_name||` ${C.target_id}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:C.target_id}),C.is_left&&e.jsx("span",{className:"text-xs text-red-500 mt-0.5",children:""}),e.jsxs("div",{className:"md:hidden mt-1 space-y-0.5",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[": ",((ce=F.find(pe=>pe.uuid===C.model_uuid))==null?void 0:ce.name)||""]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[": ",((Ne=K.find(pe=>pe.uuid===C.preset_uuid))==null?void 0:Ne.name)||""]})]})]})]})}),e.jsx("td",{className:"p-2 sm:p-3",children:C.is_left?e.jsx("span",{className:"text-red-500 text-sm",children:""}):C.enabled?e.jsx("span",{className:"text-green-600 text-sm",children:""}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})}),e.jsx("td",{className:"p-2 sm:p-3 hidden md:table-cell",children:e.jsx("span",{className:"text-sm",children:((de=F.find(pe=>pe.uuid===C.model_uuid))==null?void 0:de.name)||""})}),e.jsx("td",{className:"p-2 sm:p-3 hidden lg:table-cell",children:e.jsx("span",{className:"text-sm",children:((De=K.find(pe=>pe.uuid===C.preset_uuid))==null?void 0:De.name)||""})}),e.jsx("td",{className:"p-2 sm:p-3",children:e.jsx("span",{className:"text-sm",children:C.message_count})})]},C.target_id)})})]})})]})]})}function bc(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",provider:"",model_name:"",api_key:"",base_url:"",is_default:!1,supports_tools:!1,supports_vision:!1,description:""});b.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const u=await T.listModels();t(u)}catch(u){console.error("Failed to load models:",u)}finally{r(!1)}},x=()=>{o(null),d({name:"",provider:"",model_name:"",api_key:"",base_url:"",is_default:!1,supports_tools:!1,supports_vision:!1,description:""}),i(!0)},g=u=>{o(u),d({name:u.name,provider:u.provider,model_name:u.model_name,api_key:"",base_url:u.base_url||"",is_default:u.is_default,supports_tools:u.supports_tools,supports_vision:u.supports_vision,description:u.description||""}),i(!0)},y=async()=>{try{l?await T.updateModel(l.uuid,c):await T.createModel(c),i(!1),await m()}catch(u){console.error("Failed to save model:",u),alert("")}},h=async u=>{if(confirm(""))try{await T.deleteModel(u),await m()}catch(w){console.error("Failed to delete model:",w),alert("")}},p=async u=>{try{await T.updateModel(u,{is_default:!0}),await m()}catch(w){console.error("Failed to set default:",w),alert("")}};return a?e.jsx("div",{className:"text-center py-8",children:"..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:""}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[e.jsx(Ts,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""})]})}),e.jsx("tbody",{children:s.map(u=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:u.name}),e.jsx("td",{className:"p-3",children:u.provider}),e.jsx("td",{className:"p-3",children:u.model_name}),e.jsx("td",{className:"p-3",children:u.is_default?e.jsx(_a,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}):e.jsx("button",{onClick:()=>p(u.uuid),className:"text-gray-400 hover:text-yellow-500",children:e.jsx(_a,{className:"w-5 h-5"})})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[u.supports_tools&&e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 rounded-md",children:""}),u.supports_vision&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 rounded-md",children:""})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(u),className:"text-blue-500 hover:text-blue-600",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(u.uuid),className:"text-red-500 hover:text-red-600",children:e.jsx(bt,{className:"w-4 h-4"})})]})})]},u.uuid))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:l?"":""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.name,onChange:u=>d({...c,name:u.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.provider,onChange:u=>d({...c,provider:u.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"openai, anthropic, deepseek"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.model_name,onChange:u=>d({...c,model_name:u.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"gpt-4, claude-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"API Key"}),e.jsx("input",{type:"password",value:c.api_key,onChange:u=>d({...c,api_key:u.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:l?"":"API Key"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Base URL ()"}),e.jsx("input",{type:"text",value:c.base_url,onChange:u=>d({...c,base_url:u.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"API"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_default,onChange:u=>d({...c,is_default:u.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.supports_tools,onChange:u=>d({...c,supports_tools:u.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.supports_vision,onChange:u=>d({...c,supports_vision:u.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("textarea",{value:c.description,onChange:u=>d({...c,description:u.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:""}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]})]})})]})}function yc(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("");b.useEffect(()=>{c()},[n,l]);const c=async()=>{try{r(!0);const x=await T.listMemories(n||void 0,l||void 0);t(x)}catch(x){console.error("Failed to load memories:",x)}finally{r(!1)}},d=async x=>{if(confirm(""))try{await T.deleteMemory(x),await c()}catch(g){console.error("Failed to delete memory:",g),alert("")}},m=async(x,g,y)=>{if(confirm(""))try{await T.clearMemory(x,g,y),await c()}catch(h){console.error("Failed to clear memory:",h),alert("")}};return a?e.jsx("div",{className:"text-center py-8",children:"..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-semibold",children:""})}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("select",{value:n,onChange:x=>i(x.target.value),className:"px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"group",children:""}),e.jsx("option",{value:"user",children:""})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),placeholder:"QQ",className:"w-full pl-10 pr-3 py-2 border rounded-lg bg-white"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:"ID"}),e.jsx("th",{className:"text-left p-3",children:"UUID"}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""})]})}),e.jsx("tbody",{children:s.map(x=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${x.memory_type==="group"?"bg-blue-100":"bg-green-100"}`,children:x.memory_type==="group"?"":""})}),e.jsx("td",{className:"p-3",children:x.target_id}),e.jsx("td",{className:"p-3",children:x.preset_uuid?e.jsxs("span",{className:"text-sm text-gray-600",children:[x.preset_uuid.substring(0,8),"..."]}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"p-3",children:x.message_count}),e.jsx("td",{className:"p-3",children:x.last_active?new Date(x.last_active).toLocaleString("zh-CN"):"-"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(x.memory_type,x.target_id,x.preset_uuid),className:"text-orange-500 hover:text-orange-600",title:"",children:""}),e.jsx("button",{onClick:()=>d(x.uuid),className:"text-red-500 hover:text-red-600",children:e.jsx(bt,{className:"w-4 h-4"})})]})})]},x.uuid))})]}),s.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:""})]})]})]})}function jc(){const[s,t]=b.useState("tools"),[a,r]=b.useState([]),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState([]),[m,x]=b.useState(null),[g,y]=b.useState(!1),[h,p]=b.useState([]);b.useEffect(()=>{u(),w(),k()},[]);const u=async()=>{try{const j=await T.get("/api/ai/tool-permissions");r(j.permissions)}catch(j){console.error("Failed to load tool permissions:",j)}},w=async()=>{try{const j=await T.get("/api/ai/admin-users");d(j.admins)}catch(j){console.error("Failed to load admin users:",j)}},k=async()=>{try{const j=await T.get("/api/ai/approval-logs?limit=50");p(j.logs)}catch(j){console.error("Failed to load approval logs:",j)}},_=async()=>{if(n)try{await T.post("/api/ai/tool-permissions",n),await u(),o(!1),i(null)}catch(j){console.error("Failed to save tool permission:",j),alert(": "+j.message)}},S=async j=>{if(confirm(` "${j}" `))try{await T.delete(`/api/ai/tool-permissions/${j}`),await u()}catch(I){console.error("Failed to delete tool permission:",I),alert(": "+I.message)}},A=async()=>{if(m)try{await T.post("/api/ai/admin-users",m),await w(),y(!1),x(null)}catch(j){console.error("Failed to save admin user:",j),alert(": "+j.message)}},R=async j=>{if(confirm(` "${j}" `))try{await T.delete(`/api/ai/admin-users/${j}`),await w()}catch(I){console.error("Failed to delete admin user:",I),alert(": "+I.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:""}),e.jsx("p",{className:"text-gray-600 text-sm",children:" AI  QQ"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2",children:[e.jsx("button",{onClick:()=>t("tools"),className:`px-4 py-2 rounded-lg transition-colors ${s==="tools"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>t("admins"),className:`px-4 py-2 rounded-lg transition-colors ${s==="admins"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),e.jsx("button",{onClick:()=>t("logs"),className:`px-4 py-2 rounded-lg transition-colors ${s==="logs"?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""})]})}),e.jsxs("div",{className:"p-6",children:[s==="tools"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"AI "}),e.jsx("button",{onClick:()=>{i({tool_name:"",requires_permission:!0,requires_admin_approval:!1,requires_ai_approval:!0,allowed_users:[],danger_level:0}),o(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"+ "})]}),a.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:'""'}):e.jsx("div",{className:"space-y-3",children:a.map(j=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:j.tool_name}),j.tool_category&&e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:j.tool_category}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${j.danger_level>=4?"bg-red-100 text-red-700":j.danger_level>=2?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[": ",j.danger_level]})]}),j.tool_description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.tool_description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[j.requires_permission&&e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:""}),j.requires_ai_approval&&e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"AI "}),j.requires_admin_approval&&e.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:""})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[": ",j.allowed_users.length>0?j.allowed_users.join(", "):""]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>{i({...j}),o(!0)},className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded",children:""}),e.jsx("button",{onClick:()=>S(j.tool_name),className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded",children:""})]})]})},j.tool_name))})]}),s==="admins"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:" QQ"}),e.jsx("button",{onClick:()=>{x({qq_number:"",nickname:"",permission_level:1,is_active:!0,can_approve_all_tools:!1,approved_tools:[],total_approvals:0,total_rejections:0}),y(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"+ "})]}),c.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:'""'}):e.jsx("div",{className:"space-y-3",children:c.map(j=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:j.qq_number}),j.nickname&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(",j.nickname,")"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${j.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:j.is_active?"":""}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[": ",j.permission_level]})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:j.can_approve_all_tools?e.jsx("span",{className:"text-green-600",children:""}):e.jsxs("span",{children:[": ",j.approved_tools.length>0?j.approved_tools.join(", "):""]})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":  ",j.total_approvals,"  ",j.total_rejections," "]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>{x({...j}),y(!0)},className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded",children:""}),e.jsx("button",{onClick:()=>R(j.qq_number),className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded",children:""})]})]})},j.qq_number))})]}),s==="logs"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:""})]}),h.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:""}):e.jsx("div",{className:"space-y-3",children:h.map(j=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:j.tool_name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${j.final_approved?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:j.final_approved?"":""}),j.executed&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${j.execution_success?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:j.execution_success?"":""})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[": ",j.user_qq," ",j.user_nickname&&`(${j.user_nickname})`]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.chat_type==="group"?"":""," ",j.chat_id]}),j.ai_reason&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["AI : ",j.ai_approved?"":""," - ",j.ai_reason]}),j.admin_reason&&e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.admin_approved?"":""," (",j.admin_qq,") - ",j.admin_reason]}),j.final_reason&&e.jsxs("div",{className:"text-sm text-gray-600",children:[": ",j.final_reason]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[": ",new Date(j.created_at).toLocaleString("zh-CN")]})]})})},j.id))})]})]})]}),l&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:n.tool_name?"":""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),e.jsx("input",{type:"text",value:n.tool_name,onChange:j=>i({...n,tool_name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:": set_group_ban"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:n.tool_category||"",onChange:j=>i({...n,tool_category:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:": "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("textarea",{value:n.tool_description||"",onChange:j=>i({...n,tool_description:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:2,placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (0-5)"}),e.jsx("input",{type:"number",min:"0",max:"5",value:n.danger_level,onChange:j=>i({...n,danger_level:parseInt(j.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.requires_permission,onChange:j=>i({...n,requires_permission:j.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.requires_ai_approval,onChange:j=>i({...n,requires_ai_approval:j.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:" AI "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.requires_admin_approval,onChange:j=>i({...n,requires_admin_approval:j.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" QQ ()"}),e.jsx("input",{type:"text",value:n.allowed_users.join(", "),onChange:j=>i({...n,allowed_users:j.target.value.split(",").map(I=>I.trim()).filter(I=>I)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:": 123456789, 987654321"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{o(!1),i(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:""}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:""})]})]})}),g&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:m.qq_number?"":""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"QQ  *"}),e.jsx("input",{type:"text",value:m.qq_number,onChange:j=>x({...m,qq_number:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" QQ "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsx("input",{type:"text",value:m.nickname||"",onChange:j=>x({...m,nickname:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" (1=, 2=)"}),e.jsx("input",{type:"number",min:"1",max:"2",value:m.permission_level,onChange:j=>x({...m,permission_level:parseInt(j.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:j=>x({...m,is_active:j.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.can_approve_all_tools,onChange:j=>x({...m,can_approve_all_tools:j.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:""})]}),!m.can_approve_all_tools&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),e.jsx("input",{type:"text",value:m.approved_tools.join(", "),onChange:j=>x({...m,approved_tools:j.target.value.split(",").map(I=>I.trim()).filter(I=>I)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:": set_group_ban, set_group_kick"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{y(!1),x(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:""}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:""})]})]})})]})}function Nc(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",mode:"stdio",enabled:!1,description:"",command:"",args:[],env:{},url:"",headers:{},timeout:10}),[m,x]=b.useState(""),[g,y]=b.useState(""),[h,p]=b.useState(""),[u,w]=b.useState(""),[k,_]=b.useState(""),[S,A]=b.useState(null),[R,j]=b.useState({});b.useEffect(()=>{I()},[]);const I=async()=>{try{r(!0);const v=await T.listMCPServers();t(v);const P={};for(const X of v)if(X.status==="connected")try{const re=await T.getMCPServerTools(X.uuid);P[X.uuid]=re}catch(re){console.error(`Failed to load tools for server ${X.uuid}:`,re),P[X.uuid]=[]}j(P)}catch(v){console.error("Failed to load servers:",v)}finally{r(!1)}},Y=async v=>{try{await T.connectMCPServer(v),await I()}catch(P){console.error("Failed to connect:",P),alert("")}},te=async v=>{try{await T.disconnectMCPServer(v),await I()}catch(P){console.error("Failed to disconnect:",P),alert("")}},Z=async v=>{try{const P=await T.getMCPServerTools(v);j({...R,[v]:P})}catch(P){console.error("Failed to load tools:",P),j({...R,[v]:[]})}},U=()=>{o(null),d({name:"",mode:"stdio",enabled:!1,description:"",command:"",args:[],env:{},url:"",headers:{},timeout:10}),i(!0)},se=v=>{o(v),d({name:v.name,mode:v.mode,enabled:v.enabled,description:v.description||"",command:v.command||"",args:v.args||[],env:v.env||{},url:v.url||"",headers:v.headers||{},timeout:v.timeout||10}),i(!0)},J=async()=>{try{const v={name:c.name,mode:c.mode,enabled:c.enabled,description:c.description,timeout:c.timeout};c.mode==="stdio"?(v.command=c.command,v.args=c.args,v.env=c.env):(v.url=c.url,v.headers=c.headers),l?await T.updateMCPServer(l.uuid,v):await T.createMCPServer(v),i(!1),await I()}catch(v){console.error("Failed to save server:",v),alert("")}},E=async v=>{if(confirm("MCP"))try{await T.deleteMCPServer(v),await I()}catch(P){console.error("Failed to delete server:",P),alert("")}},L=async(v,P)=>{try{await T.updateMCPServer(v,{enabled:!P}),await I()}catch(X){console.error("Failed to toggle server:",X),alert("")}},$=()=>{m.trim()&&(d({...c,args:[...c.args,m.trim()]}),x(""))},F=v=>{d({...c,args:c.args.filter((P,X)=>X!==v)})},W=()=>{g.trim()&&h.trim()&&(d({...c,env:{...c.env,[g.trim()]:h.trim()}}),y(""),p(""))},K=v=>{const P={...c.env};delete P[v],d({...c,env:P})},H=()=>{u.trim()&&k.trim()&&(d({...c,headers:{...c.headers,[u.trim()]:k.trim()}}),w(""),_(""))},Q=v=>{const P={...c.headers};delete P[v],d({...c,headers:P})};return a?e.jsx("div",{className:"text-center py-8",children:"..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"MCP"}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[e.jsx(Ts,{className:"w-4 h-4"}),"MCP"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""}),e.jsx("th",{className:"text-left p-3",children:""})]})}),e.jsx("tbody",{children:s.map(v=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:v.name}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 rounded-md",children:v.mode})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-md ${v.status==="connected"?"bg-green-100 text-green-700":v.status==="disconnected"?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:v.status==="connected"?"":v.status==="disconnected"?"":v.status||""})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>L(v.uuid,v.enabled),className:`flex items-center gap-1 ${v.enabled?"text-green-600":"text-gray-400"}`,children:v.enabled?e.jsxs(e.Fragment,{children:[e.jsx(Vn,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})})}),e.jsx("td",{className:"p-3",children:v.description||e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex gap-2",children:[v.status==="connected"?e.jsx("button",{onClick:()=>te(v.uuid),className:"text-orange-500 hover:text-orange-600",title:"",children:e.jsx(Gn,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>Y(v.uuid),className:"text-green-500 hover:text-green-600",title:"",children:e.jsx(Wn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{S===v.uuid?A(null):(A(v.uuid),v.status==="connected"&&!R[v.uuid]&&Z(v.uuid))},className:"text-blue-500 hover:text-blue-600",title:"",children:e.jsx(Fs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(v),className:"text-blue-500 hover:text-blue-600",title:"",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(v.uuid),className:"text-red-500 hover:text-red-600",title:"",children:e.jsx(bt,{className:"w-4 h-4"})})]})})]},v.uuid),S===v.uuid&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:""}),e.jsxs("button",{onClick:()=>Z(v.uuid),className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[e.jsx(et,{className:"w-4 h-4"}),""]})]}),v.status==="connected"?R[v.uuid]&&R[v.uuid].length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:R[v.uuid].map((P,X)=>e.jsxs("div",{className:"p-3 border rounded-lg bg-white",children:[e.jsx("div",{className:"font-medium text-sm",children:P.name}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:P.description||""})]},X))}):e.jsx("div",{className:"text-sm text-gray-500",children:""}):e.jsx("div",{className:"text-sm text-gray-500",children:""})]})})})]}))})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:l?"MCP":"MCP"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.name,onChange:v=>d({...c,name:v.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.description,onChange:v=>d({...c,description:v.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsxs("select",{value:c.mode,onChange:v=>d({...c,mode:v.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"stdio",children:"stdio"}),e.jsx("option",{value:"sse",children:"SSE"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.enabled,onChange:v=>d({...c,enabled:v.target.checked}),className:"w-4 h-4"}),e.jsx("label",{children:""})]}),c.mode==="stdio"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.command,onChange:v=>d({...c,command:v.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:": node, python, npx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:m,onChange:v=>x(v.target.value),onKeyPress:v=>v.key==="Enter"&&$(),className:"flex-1 px-3 py-2 border rounded-lg bg-white",placeholder:""}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.args.map((v,P)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded-md flex items-center gap-1",children:[v,e.jsx("button",{onClick:()=>F(P),className:"text-red-500 hover:text-red-600",children:""})]},P))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:g,onChange:v=>y(v.target.value),className:"flex-1 px-3 py-2 border rounded-lg bg-white",placeholder:""}),e.jsx("input",{type:"text",value:h,onChange:v=>p(v.target.value),className:"flex-1 px-3 py-2 border rounded-lg bg-white",placeholder:""}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(c.env).map(([v,P])=>e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-md",children:[e.jsxs("span",{className:"text-sm",children:[v," = ",P]}),e.jsx("button",{onClick:()=>K(v),className:"text-red-500 hover:text-red-600",children:""})]},v))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),e.jsx("input",{type:"text",value:c.url,onChange:v=>d({...c,url:v.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"https://example.com/mcp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"HTTP Headers"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:u,onChange:v=>w(v.target.value),className:"flex-1 px-3 py-2 border rounded-lg bg-white",placeholder:""}),e.jsx("input",{type:"text",value:k,onChange:v=>_(v.target.value),className:"flex-1 px-3 py-2 border rounded-lg bg-white",placeholder:""}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(c.headers).map(([v,P])=>e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-md",children:[e.jsxs("span",{className:"text-sm",children:[v,": ",P]}),e.jsx("button",{onClick:()=>Q(v),className:"text-red-500 hover:text-red-600",children:""})]},v))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:" ()"}),e.jsx("input",{type:"number",value:c.timeout,onChange:v=>d({...c,timeout:parseInt(v.target.value)}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:""}),e.jsx("button",{onClick:J,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]})]})})]})}function vc(){const[s,t]=b.useState([]),[a,r]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",system_prompt:"",temperature:1,max_tokens:2e3,description:"",top_p:void 0,top_k:void 0});b.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const p=await T.listPresets();t(p)}catch(p){console.error("Failed to load presets:",p)}finally{r(!1)}},x=()=>{o(null),d({name:"",system_prompt:"",temperature:1,max_tokens:2e3,description:"",top_p:void 0,top_k:void 0}),i(!0)},g=p=>{o(p),d({name:p.name,system_prompt:p.system_prompt,temperature:p.temperature,max_tokens:p.max_tokens,description:p.description||"",top_p:p.top_p,top_k:p.top_k}),i(!0)},y=async()=>{try{const p={...c};p.top_p||delete p.top_p,p.top_k||delete p.top_k,l?await T.updatePreset(l.uuid,p):await T.createPreset(p),i(!1),await m()}catch(p){console.error("Failed to save preset:",p),alert("")}},h=async p=>{if(confirm(""))try{await T.deletePreset(p),await m()}catch(u){console.error("Failed to delete preset:",u),alert("")}};return a?e.jsx("div",{className:"text-center py-8",children:"..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:""}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[e.jsx(Ts,{className:"w-4 h-4"}),""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(p=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:p.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(p),className:"text-blue-500 hover:text-blue-600",children:e.jsx(Is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(p.uuid),className:"text-red-500 hover:text-red-600",children:e.jsx(bt,{className:"w-4 h-4"})})]})]}),p.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.description}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[": ",p.temperature]}),e.jsxs("div",{children:["Token: ",p.max_tokens]}),p.top_p&&e.jsxs("div",{children:["Top P: ",p.top_p]}),p.top_k&&e.jsxs("div",{children:["Top K: ",p.top_k]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx("p",{className:"text-xs text-gray-500 line-clamp-3",children:p.system_prompt})})]},p.uuid))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:l?"":""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.name,onChange:p=>d({...c,name:p.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("input",{type:"text",value:c.description,onChange:p=>d({...c,description:p.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("textarea",{value:c.system_prompt,onChange:p=>d({...c,system_prompt:p.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:8,placeholder:"AI..."}),e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{user_id}"),title:"",children:"{user_id}"}),e.jsx("span",{className:"text-gray-500",children:"QQ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{user_name}"),title:"",children:"{user_name}"}),e.jsx("span",{className:"text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{user_nickname}"),title:"",children:"{user_nickname}"}),e.jsx("span",{className:"text-gray-500",children:"QQ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{group_id}"),title:"",children:"{group_id}"}),e.jsx("span",{className:"text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{group_name}"),title:"",children:"{group_name}"}),e.jsx("span",{className:"text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{current_time}"),title:"",children:"{current_time}"}),e.jsx("span",{className:"text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{current_date}"),title:"",children:"{current_date}"}),e.jsx("span",{className:"text-gray-500",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-white border rounded cursor-pointer hover:bg-gray-100",onClick:()=>navigator.clipboard.writeText("{current_time_iso}"),title:"",children:"{current_time_iso}"}),e.jsx("span",{className:"text-gray-500",children:"ISO"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:" (Temperature)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:c.temperature,onChange:p=>d({...c,temperature:parseFloat(p.target.value)}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token"}),e.jsx("input",{type:"number",min:"1",value:c.max_tokens,onChange:p=>d({...c,max_tokens:parseInt(p.target.value)}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top P ()"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"1",value:c.top_p||"",onChange:p=>d({...c,top_p:p.target.value?parseFloat(p.target.value):void 0}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top K ()"}),e.jsx("input",{type:"number",min:"1",value:c.top_k||"",onChange:p=>d({...c,top_k:p.target.value?parseInt(p.target.value):void 0}),className:"w-full px-3 py-2 border rounded-lg"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:""}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:""})]})]})})]})}function wc(){const[s,t]=b.useState([]),[a,r]=b.useState({}),[n,i]=b.useState(!1),[l,o]=b.useState(!0),[c,d]=b.useState(!1);b.useEffect(()=>{m()},[]);const m=async()=>{var y;try{o(!0);const[h,p,u]=await Promise.all([T.listAITools(),T.getEnabledTools("global").catch(()=>({})),T.getAIConfig("global").catch(()=>({config:{}}))]);t(h),i(((y=u.config)==null?void 0:y.tools_enabled)!==void 0?u.config.tools_enabled:!1);const w={};h.forEach(k=>{const _=k.name,S=p;w[_]=S[_]!==void 0?S[_]:!0}),r(w)}catch(h){console.error("Failed to load data:",h)}finally{o(!1)}},x=async()=>{try{d(!0);const y=(await T.getAIConfig("global")).config||{};await T.updateAIConfig("global",void 0,{config:{...y,tools_enabled:n,enabled_tools:a}}),await T.updateEnabledTools("global",void 0,a),alert("")}catch(y){console.error("Failed to save:",y),alert("")}finally{d(!1)}};if(l)return e.jsx("div",{className:"text-center py-8",children:"..."});const g=s.reduce((y,h)=>{const p=h.category||"";return y[p]||(y[p]=[]),y[p].push(h),y},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Fs,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold",children:""})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:y=>i(y.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"AIAI"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:""}),e.jsxs("button",{onClick:x,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:[e.jsx(Ze,{className:"w-4 h-4"}),c?"...":""]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:'AIAI""'}),Object.entries(g).map(([y,h])=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3 text-gray-700 border-b pb-2",children:y}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(p=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg transition-colors ${p.dangerous?"border-red-200 bg-red-50 hover:bg-red-100":"border-gray-200 bg-gray-50 hover:bg-gray-100"} ${n?"":"opacity-50"}`,children:[e.jsx("input",{type:"checkbox",id:`tool-${p.name}`,checked:a[p.name]!==!1,onChange:u=>{r({...a,[p.name]:u.target.checked})},disabled:!n,className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("label",{htmlFor:`tool-${p.name}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:p.description}),p.dangerous&&e.jsx("span",{className:"inline-block mt-2 text-xs text-red-600 bg-red-100 px-2 py-0.5 rounded",children:""})]})]},p.name))})]},y)),e.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-2",children:[e.jsx("button",{onClick:()=>{const y={};s.forEach(h=>{y[h.name]=!0}),r(y)},disabled:!n,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),e.jsx("button",{onClick:()=>{const y={};s.forEach(h=>{y[h.name]=!1}),r(y)},disabled:!n,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]})}const oe=()=>{const s=localStorage.getItem("access_token");return ie.create({baseURL:"/api",headers:{"Content-Type":"application/json",Authorization:s?`Bearer ${s}`:""}})},Sc=()=>{var Zs,Ys,ea,ta,sa,aa,ra,na,ia,la,oa,ca,da,ua,ma,xa,ha,pa;const[s,t]=b.useState(0),[a,r]=b.useState(!1),[n,i]=b.useState(null),[l,o]=b.useState(null),[c,d]=b.useState(!1),[m,x]=b.useState(""),[g,y]=b.useState(!1),[h,p]=b.useState([]),[u,w]=b.useState(0),[k,_]=b.useState(1),[S,A]=b.useState(""),[R,j]=b.useState([]),[I,Y]=b.useState(0),[te,Z]=b.useState(1),[U,se]=b.useState(""),[J,E]=b.useState([]),[L,$]=b.useState(0),[F,W]=b.useState(1),[K,H]=b.useState(""),[Q,v]=b.useState([]),[P,X]=b.useState(0),[re,je]=b.useState(1),[Re,ss]=b.useState(""),[wt,C]=b.useState([]),[ce,Ne]=b.useState(0),[de,De]=b.useState(1),[pe,it]=b.useState([]),[St,lt]=b.useState(0),[Ve,_t]=b.useState(1),[Ct,ee]=b.useState([]),[kt,Et]=b.useState(0),[ot,_e]=b.useState(1),[ve,Pt]=b.useState(""),[D,G]=b.useState(null),[ne,Ce]=b.useState(!1),[le,qs]=b.useState({dream:null,check:null,reflect:null}),[be,as]=b.useState(null),[rs,ns]=b.useState([]),[Ke,cn]=b.useState(""),[At,Hs]=b.useState([]),[is,Vs]=b.useState(!1),[Rt,dn]=b.useState("stats"),[Ie,Ks]=b.useState([]),[ye,ls]=b.useState(null),xe=20;b.useEffect(()=>{Gs(),Qs()},[]),b.useEffect(()=>{if(s===7){Lt();const f=setInterval(Lt,3e4);return()=>clearInterval(f)}else if(s===8){ct();const f=setInterval(ct,3e4);return()=>clearInterval(f)}else if(s===9){Ot();const f=setInterval(Ot,5e3);return()=>clearInterval(f)}},[s]),b.useEffect(()=>{s===0?un():s===1?mn():s===2?xn():s===3?hn():s===4?pn():s===5?gn():s===6?fn():s===7?Lt():s===8?ct():s===9?Ot():s===10&&Qs()},[s,k,S,te,U,F,K,re,Re,de,Ve,ot,ve]);const Gs=async()=>{try{const f=await oe().get("/ai/learning/stats");o(f.data)}catch(f){console.error("Failed to load stats:",f)}},un=async()=>{var f,O,z;r(!0),i(null);try{const M={limit:xe,offset:(k-1)*xe};S&&(M.chat_id=S);const he=await oe().get("/ai/learning/expressions",{params:M});p(he.data.items),w(he.data.total),console.log(`[Expressions] Loaded ${((f=he.data.items)==null?void 0:f.length)||0} expressions, total: ${he.data.total||0}`)}catch(M){console.error("Failed to load expressions:",M),i(((z=(O=M.response)==null?void 0:O.data)==null?void 0:z.detail)||"")}finally{r(!1)}},mn=async()=>{var f,O;r(!0),i(null);try{const z={limit:xe,offset:(te-1)*xe};U&&(z.chat_id=U);const M=await oe().get("/ai/learning/jargons",{params:z});j(M.data.items),Y(M.data.total)}catch(z){i(((O=(f=z.response)==null?void 0:f.data)==null?void 0:O.detail)||"")}finally{r(!1)}},xn=async()=>{var f,O;r(!0),i(null);try{const z={limit:xe,offset:(F-1)*xe};K&&(z.chat_id=K);const M=await oe().get("/ai/learning/chat-history",{params:z});E(M.data.items),$(M.data.total)}catch(z){i(((O=(f=z.response)==null?void 0:f.data)==null?void 0:O.detail)||"")}finally{r(!1)}},hn=async()=>{var f,O;r(!0),i(null);try{const z={limit:xe,offset:(re-1)*xe};Re&&(z.chat_id=Re);const M=await oe().get("/ai/learning/message-records",{params:z});v(M.data.items),X(M.data.total)}catch(z){i(((O=(f=z.response)==null?void 0:f.data)==null?void 0:O.detail)||"")}finally{r(!1)}},pn=async()=>{var f,O;r(!0),i(null);try{const z={limit:xe,offset:(de-1)*xe},M=await oe().get("/ai/learning/persons",{params:z});C(M.data.items),Ne(M.data.total)}catch(z){i(((O=(f=z.response)==null?void 0:f.data)==null?void 0:O.detail)||"")}finally{r(!1)}},gn=async()=>{var f,O;r(!0),i(null);try{const z={limit:xe,offset:(Ve-1)*xe},M=await oe().get("/ai/learning/groups",{params:z});it(M.data.items),lt(M.data.total)}catch(z){i(((O=(f=z.response)==null?void 0:f.data)==null?void 0:O.detail)||"")}finally{r(!1)}},fn=async()=>{var f,O,z;r(!0),i(null);try{const M={limit:xe,offset:(ot-1)*xe};ve&&(M.chat_id=ve);const he=await oe().get("/ai/learning/stickers",{params:M});ee(he.data.items),Et(he.data.total),console.log(`[Stickers] Loaded ${((f=he.data.items)==null?void 0:f.length)||0} stickers, total: ${he.data.total||0}`)}catch(M){console.error("Failed to load stickers:",M),i(((z=(O=M.response)==null?void 0:O.data)==null?void 0:z.detail)||"")}finally{r(!1)}},Ws=f=>new Date(f).toLocaleString("zh-CN"),Js=f=>new Date(f*1e3).toLocaleString("zh-CN"),Qs=async()=>{try{const f=await oe().get("/ai/learning/config",{params:{config_type:"global"}});G(f.data)}catch(f){console.error("Failed to load learning config:",f),i("")}},bn=async()=>{Ce(!0);try{await oe().put("/ai/learning/config",D,{params:{config_type:"global"}}),i(null),alert("")}catch(f){console.error("Failed to save learning config:",f),i("")}finally{Ce(!1)}},Lt=async()=>{try{const[f,O,z]=await Promise.all([oe().get("/ai/maintenance/dream/stats").catch(M=>(console.error("Failed to load dream stats:",M),{data:null})),oe().get("/ai/maintenance/expression-check/stats").catch(M=>(console.error("Failed to load check stats:",M),{data:null})),oe().get("/ai/maintenance/expression-reflect/stats").catch(M=>(console.error("Failed to load reflect stats:",M),{data:null}))]);qs({dream:f.data,check:O.data,reflect:z.data}),console.log("[Maintenance] Stats loaded:",{dream:f.data?"":"",check:O.data?"":"",reflect:z.data?"":""})}catch(f){console.error("Failed to load maintenance stats:",f)}},ct=async()=>{var f,O,z,M;try{const he=await oe().get("/ai/knowledge/stats").catch(cs=>(console.error("Failed to load KG stats:",cs),{data:{triples:0,entities:0,relationships:0,avg_confidence:0}}));as(he.data||{triples:0,entities:0,relationships:0,avg_confidence:0});const os=await oe().get("/ai/knowledge/triples",{params:{limit:20,offset:0}}).catch(cs=>(console.error("Failed to load KG triples:",cs),{data:{items:[],total:0}}));ns(((f=os.data)==null?void 0:f.items)||[]),console.log(`[KG] Loaded ${((z=(O=os.data)==null?void 0:O.items)==null?void 0:z.length)||0} triples, total: ${((M=os.data)==null?void 0:M.total)||0}`)}catch(he){console.error("Failed to load knowledge graph data:",he),as({triples:0,entities:0,relationships:0,avg_confidence:0}),ns([])}},Ot=async()=>{var f;try{const O=await oe().get("/ai/heartflow/chats").catch(z=>(console.error("Failed to load heartflow chats:",z),{data:{chats:[]}}));Ks(O.data.chats||[]),console.log(`[HeartFlow] Loaded ${((f=O.data.chats)==null?void 0:f.length)||0} chats`)}catch(O){console.error("Failed to load heartflow data:",O)}},yn=async f=>{try{const O=await oe().get(`/ai/heartflow/stats/${encodeURIComponent(f)}`);ls({chat_id:f,...O.data})}catch(O){console.error("Failed to load heartflow chat details:",O)}},Xs=async()=>{var f,O,z;if(Ke.trim()){Vs(!0);try{const M=await oe().post("/ai/knowledge/query",{query:Ke,limit:20});Hs(M.data.results||[]),console.log(`[KG Query] Found ${((f=M.data.results)==null?void 0:f.length)||0} results for: ${Ke}`)}catch(M){console.error("Failed to query knowledge:",M),Hs([]),alert(((z=(O=M.response)==null?void 0:O.data)==null?void 0:z.detail)||"")}finally{Vs(!1)}}},jn=async()=>{var f,O,z;if(m===""){y(!0);try{const M=await oe().delete("/ai/learning/clear-all");p([]),w(0),j([]),Y(0),E([]),$(0),v([]),X(0),C([]),Ne(0),it([]),lt(0),ee([]),Et(0),as(null),ns([]),Ks([]),ls(null),qs({dream:null,check:null,reflect:null}),await Gs(),s===7?await Lt():s===8?await ct():s===9&&await Ot(),d(!1),x("");const he=((f=M.data)==null?void 0:f.cleared_tables)||[];alert(`


${he.join(`
`)}`)}catch(M){console.error("Failed to clear data:",M),alert(((z=(O=M.response)==null?void 0:O.data)==null?void 0:z.detail)||"")}finally{y(!1)}}},Ue=(f,O,z)=>{const M=Math.ceil(O/xe);return M<=1?null:e.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[e.jsx("button",{onClick:()=>z(Math.max(1,f-1)),disabled:f===1,className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:""}),e.jsxs("span",{className:"px-4 py-1",children:[" ",f," / ",M,"  ( ",O," )"]}),e.jsx("button",{onClick:()=>z(Math.min(M,f+1)),disabled:f===M,className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:""})]})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI "}),e.jsx("p",{className:"text-gray-600 mt-2",children:" Xiaoyi_AI "})]}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:""})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:""}),e.jsx("p",{className:"text-gray-600 mb-4",children:" AI "}),e.jsxs("ul",{className:"list-disc list-inside text-gray-600 mb-4 space-y-1 text-sm",children:[e.jsx("li",{children:" (ai_expressions)"}),e.jsx("li",{children:" (ai_jargons)"}),e.jsx("li",{children:" (ai_stickers)"}),e.jsx("li",{children:" (ai_chat_history)"}),e.jsx("li",{children:" (ai_message_records)"}),e.jsx("li",{children:" (ai_person_info)"}),e.jsx("li",{children:" (ai_group_info)"}),e.jsx("li",{children:" (ai_expression_usage)"}),e.jsx("li",{children:" (kg_triples)"}),e.jsx("li",{children:" (kg_entities)"}),e.jsx("li",{children:" (HeartFlow)"})]}),e.jsx("p",{className:"text-red-600 font-semibold mb-4 text-sm",children:" "}),e.jsxs("p",{className:"text-gray-700 mb-4",children:['"',e.jsx("span",{className:"font-mono font-bold",children:""}),'"']}),e.jsx("input",{type:"text",value:m,onChange:f=>x(f.target.value),placeholder:"",className:"w-full px-3 py-2 border border-gray-300 rounded mb-4 focus:outline-none focus:ring-2 focus:ring-red-500",disabled:g}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{d(!1),x("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded hover:bg-gray-50 transition-colors",disabled:g,children:""}),e.jsx("button",{onClick:jn,disabled:m!==""||g,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"...":""})]})]})}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.expressions_count})]}),e.jsx(Ca,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.jargons_count})]}),e.jsx(Bt,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.message_records_count})]}),e.jsx(ka,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.known_persons_count," / ",l.persons_count]})]}),e.jsx(Ye,{className:"w-8 h-8 text-orange-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:""}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.stickers_count})]}),e.jsx(ka,{className:"w-8 h-8 text-pink-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:["","","","","","","","","","",""].map((f,O)=>e.jsx("button",{onClick:()=>t(O),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${s===O?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:f},O))})}),e.jsxs("div",{className:"p-6",children:[n&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:n}),a&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),s===0&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:" ID (: group:123456)",value:S,onChange:f=>{A(f.target.value),_(1)},className:"px-4 py-2 border rounded-lg w-full max-w-md"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.situation}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.style}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.chat_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.count}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.rejected?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-700",children:""}):f.checked?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:""}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:""})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Ws(f.updated_at)})]},f.id))})]})}),Ue(k,u,_)]}),s===1&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:" ID (: group:123456)",value:U,onChange:f=>{se(f.target.value),Z(1)},className:"px-4 py-2 border rounded-lg w-full max-w-md"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:R.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.content}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.meaning||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.chat_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.count}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.is_complete?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:""}):f.is_jargon===!0?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:""}):f.is_jargon===!1?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:""}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:""})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Ws(f.updated_at)})]},f.id))})]})}),Ue(te,I,Z)]}),s===2&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:" ID",value:K,onChange:f=>{H(f.target.value),W(1)},className:"px-4 py-2 border rounded-lg w-full max-w-md"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:J.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.theme}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[f.summary.substring(0,50),"..."]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.chat_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.count})]},f.id))})]})}),Ue(F,L,W)]}),s===3&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:" ID",value:Re,onChange:f=>{ss(f.target.value),je(1)},className:"px-4 py-2 border rounded-lg w-full max-w-md"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Q.map(f=>{var O;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[((O=f.plain_text)==null?void 0:O.substring(0,50))||"-","..."]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.user_nickname||f.user_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.chat_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Js(f.time)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.is_bot_message?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:""}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:""})})]},f.id)})})]})}),Ue(re,P,je)]}),s===4&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:" ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"AI "}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:wt.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.person_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.person_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.nickname||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.is_known?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:""}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:""})})]},f.id))})]})}),Ue(de,ce,De)]}),s===5&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:" ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:pe.map(f=>{var O;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.group_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.group_name||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[((O=f.group_impression)==null?void 0:O.substring(0,30))||"-","..."]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.member_count})]},f.id)})})]})}),Ue(Ve,St,_t)]}),s===6&&!a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:" ID (: group:123456)",value:ve,onChange:f=>{Pt(f.target.value),_e(1)},className:"px-4 py-2 border rounded-lg w-full max-w-md"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Ct.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.sticker_type}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.situation||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:f.emotion||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",title:f.meaning||"",children:f.meaning?f.meaning.substring(0,30)+"...":"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.chat_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.count}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.rejected?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-700",children:""}):f.checked?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:""}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:""})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:f.last_active_time?Js(f.last_active_time):"-"})]},f.id))})]})}),Ue(ot,kt,_e)]}),s===7&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("div",{className:"font-medium mb-1",children:"AI "}),e.jsx("div",{children:""})]})]})}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Jn,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Dream "})]}),le.dream?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:le.dream.total_cycles||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:le.dream.total_cycles>0?`${((le.dream.successful_cycles||0)/le.dream.total_cycles*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:le.dream.total_iterations||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold",children:le.dream.is_running?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-500",children:""})})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:""})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:""})]}),le.check?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:le.check.total_checked||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:le.check.total_accepted||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-red-600",children:le.check.total_rejected||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:le.check.total_checked>0?`${((le.check.total_accepted||0)/le.check.total_checked*100).toFixed(1)}%`:"0%"})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:""})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:""})]}),le.reflect?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:le.reflect.total_reflections||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:le.reflect.total_analyzed||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:le.reflect.total_recommendations||0})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600",children:""}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:le.reflect.tracked_expressions||0})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:""})]})]}),s===8&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qn,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-purple-800",children:[e.jsx("div",{className:"font-medium mb-1",children:""}),e.jsx("div",{children:""})]})]})}),be&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:be.triples||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:be.entities||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:be.relationships||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:be.avg_confidence?`${(be.avg_confidence*100).toFixed(1)}%`:"0%"})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-4",children:[{id:"stats",label:"",icon:Ca},{id:"triples",label:"",icon:Bt},{id:"query",label:"",icon:ht}].map(f=>{const O=f.icon;return e.jsxs("button",{onClick:()=>dn(f.id),className:`
                          flex items-center gap-2 px-4 py-2 border-b-2 transition-colors
                          ${Rt===f.id?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}
                        `,children:[e.jsx(O,{className:"w-4 h-4"}),f.label]},f.id)})})}),Rt==="stats"&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:""})}),Rt==="triples"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("button",{onClick:ct,className:"text-sm text-blue-600 hover:text-blue-800",children:""})]}),rs.length>0?e.jsxs("div",{className:"space-y-2",children:[rs.slice(0,10).map((f,O)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:f.subject}),e.jsx("span",{className:"text-blue-600",children:f.predicate}),e.jsx("span",{className:"font-medium text-gray-900",children:f.object}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[": ",(f.confidence*100).toFixed(0),"%"]})]}),f.context&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded",children:[f.context.substring(0,100),"..."]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:[": ",f.source_chat_id," | ",new Date(f.timestamp*1e3).toLocaleString("zh-CN")]})]},O)),rs.length>=10&&e.jsxs("div",{className:"text-center text-sm text-gray-500 mt-2",children:[" 10  ",(be==null?void 0:be.triples)||0," "]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:(be==null?void 0:be.triples)===0?e.jsxs("div",{children:[e.jsx("p",{children:""}),e.jsx("p",{className:"text-xs mt-2",children:"..."})]}):e.jsxs("div",{children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),"..."]})})]}),Rt==="query"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ht,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("div",{className:"font-medium mb-1",children:""}),e.jsx("div",{children:'""""'})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"...",value:Ke,onChange:f=>cn(f.target.value),onKeyPress:f=>f.key==="Enter"&&Xs(),className:"flex-1 px-4 py-2 border rounded-lg"}),e.jsx("button",{onClick:Xs,disabled:is||!Ke.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2",children:is?e.jsxs(e.Fragment,{children:[e.jsx(Xn,{className:"w-4 h-4 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"w-4 h-4"}),""]})})]}),At.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[" ",At.length," "]}),e.jsx("div",{className:"space-y-2",children:At.map((f,O)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:f.subject}),e.jsx("span",{className:"text-blue-600",children:f.predicate}),e.jsx("span",{className:"font-medium text-gray-900",children:f.object}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[": ",(f.confidence*100).toFixed(0),"%"]})]}),f.context&&e.jsx("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:f.context}),f.source_chat_id&&e.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:[": ",f.source_chat_id," | ",f.timestamp?new Date(f.timestamp*1e3).toLocaleString("zh-CN"):""]})]},O))})]}),At.length===0&&Ke&&!is&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:""}),e.jsx("p",{className:"text-xs mt-2",children:""})]})]})]}),s===9&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Zn,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("div",{className:"font-medium mb-1",children:"HeartFlow "}),e.jsx("div",{children:""})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:Ie.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:Ie.reduce((f,O)=>f+(O.message_count||0),0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsx("div",{className:"text-2xl font-bold",children:Ie.reduce((f,O)=>f+(O.reply_count||0),0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[e.jsx("div",{className:"text-sm opacity-90",children:""}),e.jsxs("div",{className:"text-2xl font-bold",children:[Ie.length>0?(Ie.reduce((f,O)=>f+(O.reply_ratio||0),0)/Ie.length*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-semibold",children:""})}),e.jsx("div",{className:"divide-y divide-gray-200",children:Ie.length===0?e.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:""}):Ie.map(f=>e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>yn(f.chat_id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:f.chat_id}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f.atmosphere==="silent"?"bg-gray-100 text-gray-700":f.atmosphere==="calm"?"bg-blue-100 text-blue-700":f.atmosphere==="active"?"bg-green-100 text-green-700":f.atmosphere==="heated"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:f.atmosphere==="silent"?"":f.atmosphere==="calm"?"":f.atmosphere==="active"?"":f.atmosphere==="heated"?"":""}),e.jsx("span",{className:"text-2xl",children:f.emotional_state==="neutral"?"":f.emotional_state==="happy"?"":f.emotional_state==="excited"?"":f.emotional_state==="sad"?"":f.emotional_state==="angry"?"":f.emotional_state==="confused"?"":""})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:""}),e.jsx("div",{className:"font-medium",children:f.active_participants||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:""}),e.jsx("div",{className:"font-medium",children:f.message_count||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:""}),e.jsxs("div",{className:"font-medium",children:[((f.reply_ratio||0)*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:""}),e.jsxs("div",{className:"font-medium",children:[((f.topic_activity||0)*100).toFixed(0),"%"]})]})]})]},f.chat_id))})]}),ye&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[": ",ye.chat_id]}),e.jsx("button",{onClick:()=>ls(null),className:"text-gray-500 hover:text-gray-700 text-sm",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"text-lg font-medium",children:ye.atmosphere==="silent"?"":ye.atmosphere==="calm"?"":ye.atmosphere==="active"?"":ye.atmosphere==="heated"?"":""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"text-lg font-medium",children:ye.emotional_state==="neutral"?"":ye.emotional_state==="happy"?"":ye.emotional_state==="excited"?"":ye.emotional_state==="sad"?"":ye.emotional_state==="angry"?"":ye.emotional_state==="confused"?"":""})]})]})]})]}),s===10&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("div",{className:"font-medium mb-1",children:""}),e.jsx("div",{children:""})]})]})}),D?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((Zs=D.expression_learning)==null?void 0:Zs.enabled)??!0,onChange:f=>{G({...D,expression_learning:{...D.expression_learning,enabled:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]}),((Ys=D.expression_learning)==null?void 0:Ys.enabled)&&e.jsxs("div",{className:"space-y-3 ml-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ea=D.expression_learning)==null?void 0:ea.use_expressions)??!0,onChange:f=>{G({...D,expression_learning:{...D.expression_learning,use_expressions:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ta=D.expression_learning)==null?void 0:ta.auto_check)??!0,onChange:f=>{G({...D,expression_learning:{...D.expression_learning,auto_check:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((sa=D.jargon_learning)==null?void 0:sa.enabled)??!0,onChange:f=>{G({...D,jargon_learning:{...D.jargon_learning,enabled:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]}),((aa=D.jargon_learning)==null?void 0:aa.enabled)&&e.jsx("div",{className:"ml-6",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ra=D.jargon_learning)==null?void 0:ra.explain_jargons)??!0,onChange:f=>{G({...D,jargon_learning:{...D.jargon_learning,explain_jargons:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((na=D.sticker_learning)==null?void 0:na.enabled)??!0,onChange:f=>{G({...D,sticker_learning:{...D.sticker_learning,enabled:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]}),((ia=D.sticker_learning)==null?void 0:ia.enabled)&&e.jsx("div",{className:"ml-6",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((la=D.sticker_learning)==null?void 0:la.use_stickers)??!0,onChange:f=>{G({...D,sticker_learning:{...D.sticker_learning,use_stickers:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((oa=D.knowledge_graph)==null?void 0:oa.enabled)??!0,onChange:f=>{G({...D,knowledge_graph:{...D.knowledge_graph,enabled:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]}),((ca=D.knowledge_graph)==null?void 0:ca.enabled)&&e.jsxs("div",{className:"space-y-3 ml-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((da=D.knowledge_graph)==null?void 0:da.extract_triples)??!0,onChange:f=>{G({...D,knowledge_graph:{...D.knowledge_graph,extract_triples:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700",children:""}),e.jsx("input",{type:"number",min:"1",max:"20",value:((ua=D.knowledge_graph)==null?void 0:ua.max_triples_per_message)??5,onChange:f=>{G({...D,knowledge_graph:{...D.knowledge_graph,max_triples_per_message:parseInt(f.target.value)||5}})},className:"mt-1 px-3 py-2 border rounded-lg w-32"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"HeartFlow "}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ma=D.heartflow)==null?void 0:ma.enabled)??!0,onChange:f=>{G({...D,heartflow:{...D.heartflow,enabled:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]}),((xa=D.heartflow)==null?void 0:xa.enabled)&&e.jsxs("div",{className:"space-y-3 ml-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((ha=D.heartflow)==null?void 0:ha.track_emotions)??!0,onChange:f=>{G({...D,heartflow:{...D.heartflow,track_emotions:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((pa=D.heartflow)==null?void 0:pa.track_atmosphere)??!0,onChange:f=>{G({...D,heartflow:{...D.heartflow,track_atmosphere:f.target.checked}})},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:""})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:bn,disabled:ne,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2",children:ne?"...":""})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."})]})]})]})]})};function _c(){const[s,t]=b.useState("config"),a=[{id:"config",label:"",icon:Me},{id:"models",label:"",icon:yr},{id:"memory",label:"",icon:Yn},{id:"permissions",label:"",icon:fr},{id:"mcp",label:"MCP",icon:ei},{id:"presets",label:"",icon:Ut},{id:"tools",label:"",icon:Fs},{id:"learning",label:"AI",icon:Bt}],r=()=>{switch(s){case"config":return e.jsx(tr,{});case"models":return e.jsx(bc,{});case"memory":return e.jsx(yc,{});case"permissions":return e.jsx(jc,{});case"mcp":return e.jsx(Nc,{});case"presets":return e.jsx(vc,{});case"tools":return e.jsx(wc,{});case"learning":return e.jsx(Sc,{});default:return e.jsx(tr,{})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white flex-shrink-0",children:e.jsx("div",{className:"overflow-x-auto overflow-y-hidden scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent -mx-4 sm:mx-0",children:e.jsx("div",{className:"flex space-x-1 px-4 min-w-max sm:min-w-0",children:a.map(n=>{const i=n.icon;return e.jsxs("button",{onClick:()=>t(n.id),className:`
                    flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-3 text-xs sm:text-sm font-medium transition-colors whitespace-nowrap
                    border-b-2 -mb-px rounded-t-lg flex-shrink-0
                    ${s===n.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50"}
                  `,children:[e.jsx(i,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{children:n.label})]},n.id)})})})}),e.jsx("div",{className:"flex-1 overflow-auto p-6 bg-white",children:r()})]})}function Pe({children:s}){const{isAuthenticated:t}=zs();return t?e.jsx(e.Fragment,{children:s}):e.jsx(En,{to:"/login",replace:!0})}function Cc(){return e.jsx(Cn,{children:e.jsxs(kn,{children:[e.jsx(we,{path:"/login",element:e.jsx(ko,{})}),e.jsx(we,{path:"/",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(er,{})})})}),e.jsx(we,{path:"/dashboard",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(er,{})})})}),e.jsx(we,{path:"/plugins",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(uc,{})})})}),e.jsx(we,{path:"/onebot",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(mc,{})})})}),e.jsx(we,{path:"/chat",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(xc,{})})})}),e.jsx(we,{path:"/messages",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(hc,{})})})}),e.jsx(we,{path:"/security",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(pc,{})})})}),e.jsx(we,{path:"/audit",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(gc,{})})})}),e.jsx(we,{path:"/system",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(fc,{})})})}),e.jsx(we,{path:"/ai",element:e.jsx(Pe,{children:e.jsx(Ee,{children:e.jsx(_c,{})})})})]})})}const B=s=>typeof s=="string",xt=()=>{let s,t;const a=new Promise((r,n)=>{s=r,t=n});return a.resolve=s,a.reject=t,a},sr=s=>s==null?"":""+s,kc=(s,t,a)=>{s.forEach(r=>{t[r]&&(a[r]=t[r])})},Ec=/###/g,ar=s=>s&&s.indexOf("###")>-1?s.replace(Ec,"."):s,rr=s=>!s||B(s),pt=(s,t,a)=>{const r=B(t)?t.split("."):t;let n=0;for(;n<r.length-1;){if(rr(s))return{};const i=ar(r[n]);!s[i]&&a&&(s[i]=new a),Object.prototype.hasOwnProperty.call(s,i)?s=s[i]:s={},++n}return rr(s)?{}:{obj:s,k:ar(r[n])}},nr=(s,t,a)=>{const{obj:r,k:n}=pt(s,t,Object);if(r!==void 0||t.length===1){r[n]=a;return}let i=t[t.length-1],l=t.slice(0,t.length-1),o=pt(s,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=pt(s,l,Object),o&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=a},Pc=(s,t,a,r)=>{const{obj:n,k:i}=pt(s,t,Object);n[i]=n[i]||[],n[i].push(a)},Ht=(s,t)=>{const{obj:a,k:r}=pt(s,t);if(a)return a[r]},Ac=(s,t,a)=>{const r=Ht(s,a);return r!==void 0?r:Ht(t,a)},ln=(s,t,a)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in s?B(s[r])||s[r]instanceof String||B(t[r])||t[r]instanceof String?a&&(s[r]=t[r]):ln(s[r],t[r],a):s[r]=t[r]);return s},Ge=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Rc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Lc=s=>B(s)?s.replace(/[&<>"'\/]/g,t=>Rc[t]):s;class Oc{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const a=this.regExpMap.get(t);if(a!==void 0)return a;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Tc=[" ",",","?","!",";"],Ic=new Oc(20),Fc=(s,t,a)=>{t=t||"",a=a||"";const r=Tc.filter(l=>t.indexOf(l)<0&&a.indexOf(l)<0);if(r.length===0)return!0;const n=Ic.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!n.test(s);if(!i){const l=s.indexOf(a);l>0&&!n.test(s.substring(0,l))&&(i=!0)}return i},Ls=function(s,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!s)return;if(s[t])return s[t];const r=t.split(a);let n=s;for(let i=0;i<r.length;){if(!n||typeof n!="object")return;let l,o="";for(let c=i;c<r.length;++c)if(c!==i&&(o+=a),o+=r[c],l=n[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&c<r.length-1)continue;i+=c-i+1;break}n=l}return n},Vt=s=>s&&s.replace("_","-"),$c={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console&&console[s]&&console[s].apply(console,t)}};class Kt{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,a)}init(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=t||$c,this.options=a,this.debug=a.debug}log(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return this.forward(a,"log","",!0)}warn(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return this.forward(a,"warn","",!0)}error(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return this.forward(a,"error","")}deprecate(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)}forward(t,a,r,n){return n&&!this.debug?null:(B(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[a](t))}create(t){return new Kt(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Kt(this.logger,t)}}var Ae=new Kt;class ts{constructor(){this.observers={}}on(t,a){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(a)||0;this.observers[r].set(a,n+1)}),this}off(t,a){if(this.observers[t]){if(!a){delete this.observers[t];return}this.observers[t].delete(a)}}emit(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(l=>{let[o,c]=l;for(let d=0;d<c;d++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,c]=l;for(let d=0;d<c;d++)o.apply(o,[t,...r])})}}class ir extends ts{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const a=this.options.ns.indexOf(t);a>-1&&this.options.ns.splice(a,1)}getResource(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,a],r&&(Array.isArray(r)?o.push(...r):B(r)&&i?o.push(...r.split(i)):o.push(r)));const c=Ht(this.data,o);return!c&&!a&&!r&&t.indexOf(".")>-1&&(t=o[0],a=o[1],r=o.slice(2).join(".")),c||!l||!B(r)?c:Ls(this.data&&this.data[t]&&this.data[t][a],r,i)}addResource(t,a,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[t,a];r&&(o=o.concat(l?r.split(l):r)),t.indexOf(".")>-1&&(o=t.split("."),n=a,a=o[1]),this.addNamespaces(a),nr(this.data,o,n),i.silent||this.emit("added",t,a,r,n)}addResources(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(B(r[i])||Array.isArray(r[i]))&&this.addResource(t,a,i,r[i],{silent:!0});n.silent||this.emit("added",t,a,r)}addResourceBundle(t,a,r,n,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,a];t.indexOf(".")>-1&&(o=t.split("."),n=r,r=a,a=o[1]),this.addNamespaces(a);let c=Ht(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?ln(c,r,i):c={...c,...r},nr(this.data,o,c),l.silent||this.emit("added",t,a,r)}removeResourceBundle(t,a){this.hasResourceBundle(t,a)&&delete this.data[t][a],this.removeNamespaces(a),this.emit("removed",t,a)}hasResourceBundle(t,a){return this.getResource(t,a)!==void 0}getResourceBundle(t,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,a)}:this.getResource(t,a)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const a=this.getDataByLanguage(t);return!!(a&&Object.keys(a)||[]).find(n=>a[n]&&Object.keys(a[n]).length>0)}toJSON(){return this.data}}var on={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,a,r,n){return s.forEach(i=>{this.processors[i]&&(t=this.processors[i].process(t,a,r,n))}),t}};const lr={};class Gt extends ts{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),kc(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ae.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,a);return r&&r.res!==void 0}extractFromKey(t,a){let r=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let i=a.ns||this.options.defaultNS||[];const l=r&&t.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!Fc(t,r,n);if(l&&!o){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:B(i)?[i]:i};const d=t.split(r);(r!==n||r===n&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),t=d.join(n)}return{key:t,namespaces:B(i)?[i]:i}}translate(t,a,r){if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const n=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(t[t.length-1],a),c=o[o.length-1],d=a.lng||this.language,m=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(m){const S=a.nsSeparator||this.options.nsSeparator;return n?{res:`${c}${S}${l}`,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(a)}:`${c}${S}${l}`}return n?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(a)}:l}const x=this.resolve(t,a);let g=x&&x.res;const y=x&&x.usedKey||l,h=x&&x.exactUsedKey||l,p=Object.prototype.toString.apply(g),u=["[object Number]","[object Function]","[object RegExp]"],w=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,_=!B(g)&&typeof g!="boolean"&&typeof g!="number";if(k&&g&&_&&u.indexOf(p)<0&&!(B(w)&&Array.isArray(g))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,g,{...a,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return n?(x.res=S,x.usedParams=this.getUsedParamsDetails(a),x):S}if(i){const S=Array.isArray(g),A=S?[]:{},R=S?h:y;for(const j in g)if(Object.prototype.hasOwnProperty.call(g,j)){const I=`${R}${i}${j}`;A[j]=this.translate(I,{...a,joinArrays:!1,ns:o}),A[j]===I&&(A[j]=g[j])}g=A}}else if(k&&B(w)&&Array.isArray(g))g=g.join(w),g&&(g=this.extendTranslation(g,t,a,r));else{let S=!1,A=!1;const R=a.count!==void 0&&!B(a.count),j=Gt.hasDefaultValue(a),I=R?this.pluralResolver.getSuffix(d,a.count,a):"",Y=a.ordinal&&R?this.pluralResolver.getSuffix(d,a.count,{ordinal:!1}):"",te=R&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),Z=te&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${I}`]||a[`defaultValue${Y}`]||a.defaultValue;!this.isValidLookup(g)&&j&&(S=!0,g=Z),this.isValidLookup(g)||(A=!0,g=l);const se=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:g,J=j&&Z!==g&&this.options.updateMissing;if(A||S||J){if(this.logger.log(J?"updateKey":"missingKey",d,c,l,J?Z:g),i){const F=this.resolve(l,{...a,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let E=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let F=0;F<L.length;F++)E.push(L[F]);else this.options.saveMissingTo==="all"?E=this.languageUtils.toResolveHierarchy(a.lng||this.language):E.push(a.lng||this.language);const $=(F,W,K)=>{const H=j&&K!==g?K:se;this.options.missingKeyHandler?this.options.missingKeyHandler(F,c,W,H,J,a):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(F,c,W,H,J,a),this.emit("missingKey",F,c,W,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?E.forEach(F=>{const W=this.pluralResolver.getSuffixes(F,a);te&&a[`defaultValue${this.options.pluralSeparator}zero`]&&W.indexOf(`${this.options.pluralSeparator}zero`)<0&&W.push(`${this.options.pluralSeparator}zero`),W.forEach(K=>{$([F],l+K,a[`defaultValue${K}`]||Z)})}):$(E,l,Z))}g=this.extendTranslation(g,t,a,x,r),A&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${c}:${l}`),(A||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${l}`:l,S?g:void 0):g=this.options.parseMissingKeyHandler(g))}return n?(x.res=g,x.usedParams=this.getUsedParamsDetails(a),x):g}extendTranslation(t,a,r,n,i){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=B(t)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(d){const g=t.match(this.interpolator.nestingRegexp);m=g&&g.length}let x=r.replace&&!B(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),t=this.interpolator.interpolate(t,x,r.lng||this.language||n.usedLng,r),d){const g=t.match(this.interpolator.nestingRegexp),y=g&&g.length;m<y&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var g=arguments.length,y=new Array(g),h=0;h<g;h++)y[h]=arguments[h];return i&&i[0]===y[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${a[0]}`),null):l.translate(...y,a)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,c=B(o)?[o]:o;return t!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(t=on.handle(c,t,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n,i,l,o;return B(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,a),m=d.key;n=m;let x=d.namespaces;this.options.fallbackNS&&(x=x.concat(this.options.fallbackNS));const g=a.count!==void 0&&!B(a.count),y=g&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),h=a.context!==void 0&&(B(a.context)||typeof a.context=="number")&&a.context!=="",p=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);x.forEach(u=>{this.isValidLookup(r)||(o=u,!lr[`${p[0]}-${u}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(lr[`${p[0]}-${u}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(w=>{if(this.isValidLookup(r))return;l=w;const k=[m];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(k,m,w,u,a);else{let S;g&&(S=this.pluralResolver.getSuffix(w,a.count,a));const A=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(k.push(m+S),a.ordinal&&S.indexOf(R)===0&&k.push(m+S.replace(R,this.options.pluralSeparator)),y&&k.push(m+A)),h){const j=`${m}${this.options.contextSeparator}${a.context}`;k.push(j),g&&(k.push(j+S),a.ordinal&&S.indexOf(R)===0&&k.push(j+S.replace(R,this.options.pluralSeparator)),y&&k.push(j+A))}}let _;for(;_=k.pop();)this.isValidLookup(r)||(i=_,r=this.getResource(w,u,_,a))}))})}),{res:r,usedKey:n,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,a,r,n):this.resourceStore.getResource(t,a,r,n)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!B(t.replace);let n=r?t.replace:t;if(r&&typeof t.count<"u"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const i of a)delete n[i]}return n}static hasDefaultValue(t){const a="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&a===r.substring(0,a.length)&&t[r]!==void 0)return!0;return!1}}const ys=s=>s.charAt(0).toUpperCase()+s.slice(1);class or{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ae.create("languageUtils")}getScriptPartFromCode(t){if(t=Vt(t),!t||t.indexOf("-")<0)return null;const a=t.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(t){if(t=Vt(t),!t||t.indexOf("-")<0)return t;const a=t.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(t){if(B(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let n=Intl.getCanonicalLocales(t)[0];if(n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n)return n}catch{}const a=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(n=>n.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),a.indexOf(r[1].toLowerCase())>-1&&(r[1]=ys(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),a.indexOf(r[1].toLowerCase())>-1&&(r[1]=ys(r[1].toLowerCase())),a.indexOf(r[2].toLowerCase())>-1&&(r[2]=ys(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let a;return t.forEach(r=>{if(a)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(a=n)}),!a&&this.options.supportedLngs&&t.forEach(r=>{if(a)return;const n=this.getLanguagePartFromCode(r);if(this.isSupportedCode(n))return a=n;a=this.options.supportedLngs.find(i=>{if(i===n)return i;if(!(i.indexOf("-")<0&&n.indexOf("-")<0)&&(i.indexOf("-")>0&&n.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===n||i.indexOf(n)===0&&n.length>1))return i})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(t,a){if(!t)return[];if(typeof t=="function"&&(t=t(a)),B(t)&&(t=[t]),Array.isArray(t))return t;if(!a)return t.default||[];let r=t[a];return r||(r=t[this.getScriptPartFromCode(a)]),r||(r=t[this.formatLanguageCode(a)]),r||(r=t[this.getLanguagePartFromCode(a)]),r||(r=t.default),r||[]}toResolveHierarchy(t,a){const r=this.getFallbackCodes(a||this.options.fallbackLng||[],t),n=[],i=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return B(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):B(t)&&i(this.formatLanguageCode(t)),r.forEach(l=>{n.indexOf(l)<0&&i(this.formatLanguageCode(l))}),n}}let Mc=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Dc={1:s=>+(s>1),2:s=>+(s!=1),3:s=>0,4:s=>s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,5:s=>s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5,6:s=>s==1?0:s>=2&&s<=4?1:2,7:s=>s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,8:s=>s==1?0:s==2?1:s!=8&&s!=11?2:3,9:s=>+(s>=2),10:s=>s==1?0:s==2?1:s<7?2:s<11?3:4,11:s=>s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3,12:s=>+(s%10!=1||s%100==11),13:s=>+(s!==0),14:s=>s==1?0:s==2?1:s==3?2:3,15:s=>s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2,16:s=>s%10==1&&s%100!=11?0:s!==0?1:2,17:s=>s==1||s%10==1&&s%100!=11?0:1,18:s=>s==0?0:s==1?1:2,19:s=>s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3,20:s=>s==1?0:s==0||s%100>0&&s%100<20?1:2,21:s=>s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0,22:s=>s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3};const Uc=["v1","v2","v3"],zc=["v4"],cr={zero:0,one:1,two:2,few:3,many:4,other:5},Bc=()=>{const s={};return Mc.forEach(t=>{t.lngs.forEach(a=>{s[a]={numbers:t.nr,plurals:Dc[t.fc]}})}),s};class qc{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=a,this.logger=Ae.create("pluralResolver"),(!this.options.compatibilityJSON||zc.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Bc(),this.pluralRulesCache={}}addRule(t,a){this.rules[t]=a}clearCache(){this.pluralRulesCache={}}getRule(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Vt(t==="dev"?"en":t),n=a.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(r,{type:n})}catch{if(!t.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(c,a)}return this.pluralRulesCache[i]=l,l}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,a);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(n=>`${a}${n}`)}getSuffixes(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,a);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((n,i)=>cr[n]-cr[i]).map(n=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n}`):r.numbers.map(n=>this.getSuffix(t,n,a)):[]}getSuffix(t,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(t,r);return n?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(a)}`:this.getSuffixRetroCompatible(n,a):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,a){const r=t.noAbs?t.plurals(a):t.plurals(Math.abs(a));let n=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));const i=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Uc.includes(this.options.compatibilityJSON)}}const dr=function(s,t,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Ac(s,t,a);return!i&&n&&B(a)&&(i=Ls(s,a,r),i===void 0&&(i=Ls(t,a,r))),i},js=s=>s.replace(/\$/g,"$$$$");class Hc{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ae.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(a=>a),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:a,escapeValue:r,useRawValueToEscape:n,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:m,unescapePrefix:x,nestingPrefix:g,nestingPrefixEscaped:y,nestingSuffix:h,nestingSuffixEscaped:p,nestingOptionsSeparator:u,maxReplaces:w,alwaysFormat:k}=t.interpolation;this.escape=a!==void 0?a:Lc,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?Ge(i):l||"{{",this.suffix=o?Ge(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=m?"":x||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=g?Ge(g):y||Ge("$t("),this.nestingSuffix=h?Ge(h):p||Ge(")"),this.nestingOptionsSeparator=u||",",this.maxReplaces=w||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(a,r)=>a&&a.source===r?(a.lastIndex=0,a):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,a,r,n){let i,l,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=y=>{if(y.indexOf(this.formatSeparator)<0){const w=dr(a,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...n,...a,interpolationkey:y}):w}const h=y.split(this.formatSeparator),p=h.shift().trim(),u=h.join(this.formatSeparator).trim();return this.format(dr(a,c,p,this.options.keySeparator,this.options.ignoreJSONStructure),u,r,{...n,...a,interpolationkey:p})};this.resetRegExp();const m=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,x=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>js(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?js(this.escape(y)):js(y)}].forEach(y=>{for(o=0;i=y.regex.exec(t);){const h=i[1].trim();if(l=d(h),l===void 0)if(typeof m=="function"){const u=m(t,i,n);l=B(u)?u:""}else if(n&&Object.prototype.hasOwnProperty.call(n,h))l="";else if(x){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${t}`),l="";else!B(l)&&!this.useRawValueToEscape&&(l=sr(l));const p=y.safeValue(l);if(t=t.replace(i[0],p),x?(y.regex.lastIndex+=l.length,y.regex.lastIndex-=i[0].length):y.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,i,l;const o=(c,d)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const x=c.split(new RegExp(`${m}[ ]*{`));let g=`{${x[1]}`;c=x[0],g=this.interpolate(g,l);const y=g.match(/'/g),h=g.match(/"/g);(y&&y.length%2===0&&!h||h.length%2!==0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),d&&(l={...d,...l})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,p),`${c}${m}${g}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,c};for(;n=this.nestingRegexp.exec(t);){let c=[];l={...r},l=l.replace&&!B(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let d=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const m=n[1].split(this.formatSeparator).map(x=>x.trim());n[1]=m.shift(),c=m,d=!0}if(i=a(o.call(this,n[1].trim(),l),l),i&&n[0]===t&&!B(i))return i;B(i)||(i=sr(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),i=""),d&&(i=c.reduce((m,x)=>this.format(m,x,r.lng,{...r,interpolationkey:n[1].trim()}),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}const Vc=s=>{let t=s.toLowerCase().trim();const a={};if(s.indexOf("(")>-1){const r=s.split("(");t=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);t==="currency"&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):t==="relativetime"&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(l=>{if(l){const[o,...c]=l.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),m=o.trim();a[m]||(a[m]=d),d==="false"&&(a[m]=!1),d==="true"&&(a[m]=!0),isNaN(d)||(a[m]=parseInt(d,10))}})}return{formatName:t,formatOptions:a}},We=s=>{const t={};return(a,r,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const l=r+JSON.stringify(i);let o=t[l];return o||(o=s(Vt(r),n),t[l]=o),o(a)}};class Kc{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ae.create("formatter"),this.options=t,this.formats={number:We((a,r)=>{const n=new Intl.NumberFormat(a,{...r});return i=>n.format(i)}),currency:We((a,r)=>{const n=new Intl.NumberFormat(a,{...r,style:"currency"});return i=>n.format(i)}),datetime:We((a,r)=>{const n=new Intl.DateTimeFormat(a,{...r});return i=>n.format(i)}),relativetime:We((a,r)=>{const n=new Intl.RelativeTimeFormat(a,{...r});return i=>n.format(i,r.range||"day")}),list:We((a,r)=>{const n=new Intl.ListFormat(a,{...r});return i=>n.format(i)})},this.init(t)}init(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=a.interpolation.formatSeparator||","}add(t,a){this.formats[t.toLowerCase().trim()]=a}addCached(t,a){this.formats[t.toLowerCase().trim()]=We(a)}format(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{const{formatName:d,formatOptions:m}=Vc(c);if(this.formats[d]){let x=o;try{const g=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},y=g.locale||g.lng||n.locale||n.lng||r;x=this.formats[d](o,y,{...m,...n,...g})}catch(g){this.logger.warn(g)}return x}else this.logger.warn(`there was no format function for ${d}`);return o},t)}}const Gc=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class Wc extends ts{constructor(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=a,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=Ae.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,n.backend,n)}queueLoad(t,a,r,n){const i={},l={},o={},c={};return t.forEach(d=>{let m=!0;a.forEach(x=>{const g=`${d}|${x}`;!r.reload&&this.store.hasResourceBundle(d,x)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?l[g]===void 0&&(l[g]=!0):(this.state[g]=1,m=!1,l[g]===void 0&&(l[g]=!0),i[g]===void 0&&(i[g]=!0),c[x]===void 0&&(c[x]=!0)))}),m||(o[d]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(t,a,r){const n=t.split("|"),i=n[0],l=n[1];a&&this.emit("failedLoading",i,l,a),!a&&r&&this.store.addResourceBundle(i,l,r,void 0,void 0,{skipCopy:!0}),this.state[t]=a?-1:2,a&&r&&(this.state[t]=0);const o={};this.queue.forEach(c=>{Pc(c.loaded,[i],l),Gc(c,t),a&&c.errors.push(a),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const m=c.loaded[d];m.length&&m.forEach(x=>{o[d][x]===void 0&&(o[d][x]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(t,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:a,fcName:r,tried:n,wait:i,callback:l});return}this.readingCalls++;const o=(d,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const x=this.waitingReads.shift();this.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(d&&m&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,t,a,r,n+1,i*2,l)},i);return}l(d,m)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(t,a);d&&typeof d.then=="function"?d.then(m=>o(null,m)).catch(o):o(null,d)}catch(d){o(d)}return}return c(t,a,o)}prepareLoading(t,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();B(t)&&(t=this.languageUtils.toResolveHierarchy(t)),B(a)&&(a=[a]);const i=this.queueLoad(t,a,r,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(t,a,r){this.prepareLoading(t,a,{},r)}reload(t,a,r){this.prepareLoading(t,a,{reload:!0},r)}loadOne(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),n=r[0],i=r[1];this.read(n,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`,l),!l&&o&&this.logger.log(`${a}loaded namespace ${i} for language ${n}`,o),this.loaded(t,l,o)})}saveMissing(t,a,r,n,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${r}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...l,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let m;d.length===5?m=d(t,a,r,n,c):m=d(t,a,r,n),m&&typeof m.then=="function"?m.then(x=>o(null,x)).catch(o):o(null,m)}catch(m){o(m)}else d(t,a,r,n,o,c)}!t||!t[0]||this.store.addResource(t[0],a,r,n)}}}const ur=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),B(s[1])&&(t.defaultValue=s[1]),B(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const a=s[3]||s[2];Object.keys(a).forEach(r=>{t[r]=a[r]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),mr=s=>(B(s.ns)&&(s.ns=[s.ns]),B(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),B(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s),Ft=()=>{},Jc=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(a=>{typeof s[a]=="function"&&(s[a]=s[a].bind(s))})};class ft extends ts{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(super(),this.options=mr(t),this.services={},this.logger=Ae,this.modules={external:[]},Jc(this),a&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,a),this;setTimeout(()=>{this.init(t,a)},0)}}init(){var t=this;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof a=="function"&&(r=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(B(a.ns)?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));const n=ur();this.options={...n,...this.options,...mr(a)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);const i=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?Ae.init(i(this.modules.logger),this.options):Ae.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:typeof Intl<"u"&&(m=Kc);const x=new or(this.options);this.store=new ir(this.options.resources,this.options);const g=this.services;g.logger=Ae,g.resourceStore=this.store,g.languageUtils=x,g.pluralResolver=new qc(x,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),m&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(g.formatter=i(m),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Hc(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Wc(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(y){for(var h=arguments.length,p=new Array(h>1?h-1:0),u=1;u<h;u++)p[u-1]=arguments[u];t.emit(y,...p)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Gt(this.services,this.options),this.translator.on("*",function(y){for(var h=arguments.length,p=new Array(h>1?h-1:0),u=1;u<h;u++)p[u-1]=arguments[u];t.emit(y,...p)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ft),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=function(){return t.store[m](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=function(){return t.store[m](...arguments),t}});const c=xt(),d=()=>{const m=(x,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(g),r(x,g)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft;const n=B(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),this.options.preload&&this.options.preload.forEach(o=>l(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(t,a,r){const n=xt();return typeof t=="function"&&(r=t,t=void 0),typeof a=="function"&&(r=a,a=void 0),t||(t=this.languages),a||(a=this.options.ns),r||(r=Ft),this.services.backendConnector.reload(t,a,i=>{n.resolve(),r(i)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&on.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let a=0;a<this.languages.length;a++){const r=this.languages[a];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,a){var r=this;this.isLanguageChangingTo=t;const n=xt();this.emit("languageChanging",t);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},l=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve(function(){return r.t(...arguments)}),a&&a(c,function(){return r.t(...arguments)})},o=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=B(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,m=>{l(m,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),n}getFixedT(t,a,r){var n=this;const i=function(l,o){let c;if(typeof o!="object"){for(var d=arguments.length,m=new Array(d>2?d-2:0),x=2;x<d;x++)m[x-2]=arguments[x];c=n.options.overloadTranslationOptionHandler([l,o].concat(m))}else c={...o};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const g=n.options.keySeparator||".";let y;return c.keyPrefix&&Array.isArray(l)?y=l.map(h=>`${c.keyPrefix}${g}${h}`):y=c.keyPrefix?`${c.keyPrefix}${g}${l}`:l,n.t(y,c)};return B(t)?i.lng=t:i.lngs=t,i.ns=a,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=a.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(a.precheck){const o=a.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,t)&&(!n||l(i,t)))}loadNamespaces(t,a){const r=xt();return this.options.ns?(B(t)&&(t=[t]),t.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),a&&a(n)}),r):(a&&a(),Promise.resolve())}loadLanguages(t,a){const r=xt();B(t)&&(t=[t]);const n=this.options.preload||[],i=t.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=n.concat(i),this.loadResources(l=>{r.resolve(),a&&a(l)}),r):(a&&a(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new or(ur());return a.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return new ft(t,a)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const n={...this.options,...t,isClone:!0},i=new ft(n);return(t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new ir(this.store.data,n),i.services.resourceStore=i.store),i.translator=new Gt(i.services,n),i.translator.on("*",function(o){for(var c=arguments.length,d=new Array(c>1?c-1:0),m=1;m<c;m++)d[m-1]=arguments[m];i.emit(o,...d)}),i.init(n,a),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const me=ft.createInstance();me.createInstance=ft.createInstance;me.createInstance;me.dir;me.init;me.loadResources;me.reloadResources;me.use;me.changeLanguage;me.getFixedT;me.t;me.exists;me.setDefaultNamespace;me.hasLoadedNamespace;me.loadNamespaces;me.loadLanguages;const Qc={login:"",logout:"",save:"",cancel:"",delete:"",edit:"",add:"",search:"",loading:"...",error:"",success:"",confirm:"",close:"",refresh:"",enabled:"",disabled:"",yes:"",no:""},Xc={title:"Xiaoyi_QQ ",username:"",password:"",usernamePlaceholder:"",passwordPlaceholder:"",loginButton:"",defaultAccount:": admin / admin123",loginFailed:"",invalidCredentials:""},Zc={dashboard:"",plugins:"",security:"",audit:"",system:"",onebot:"",messages:"",adapters:""},Yc={title:"",totalMessages:"",activePlugins:"",onlineUsers:"",uptime:"",systemStatus:"",running:"",stopped:""},ed={title:"",description:"",name:"",version:"",status:"",actions:"",enable:"",disable:"",reload:"",configure:"",noPlugins:"",noPluginsDescription:"",loading:"...",enableSuccess:"",disableSuccess:"",reloadSuccess:"",actionFailed:"",uploadPlugin:"",uploadAdapter:"",loadAdapterFirst:'""',adapter:"",noAdapter:"",selectAdapter:"",changeAdapter:"",selectAdapterFirst:"",delete:"",deleteConfirm:' "{{name}}" ',deleteFailed:""},td={title:"",description:"",status:"",config:"",appName:"",appVersion:"",environment:"",debug:"",logLevel:"",pluginAutoLoad:"",webUIEnabled:" WebUI",webUIEnabledDesc:" Web ",debugMode:"",debugModeDesc:"",logLevelLabel:"",systemSettings:"",adminPassword:"",systemInfo:"",saveSettings:"",saving:"...",settingsSaved:"",saveFailed:"",loadConfigFailed:"",resetAdminPassword:"",newPassword:"",confirmPassword:"",newPasswordPlaceholder:"6",confirmPasswordPlaceholder:"",passwordResetSuccess:"",passwordResetFailed:"",confirmReset:"",resetting:"...",passwordTooShort:"6",passwordMismatch:""},sd={title:"",description:"",events:"",stats:"",time:"",user:"",action:"",resource:"",result:""},ad={title:"",description:"",users:"",usersDesc:"",permissions:"",permissionsDesc:"",roles:"",rolesDesc:"",developing:"..."},rd={title:"OneBot ",description:" OneBot ",connectionType:"",host:"",port:"",saveConfig:"",configSaved:"",saveSuccess:"",saveFailed:"",loadFailed:""},nd={title:"",noMessages:"",whenReceived:""},id={title:"",description:"",name:"",version:"",status:"",actions:"",configure:"",noAdapters:"",noAdaptersDescription:"ZIP",upload:"",uploadSuccess:"",uploadFailed:"",loading:"...",configSuccess:"",configFailed:""},ld={common:Qc,login:Xc,nav:Zc,dashboard:Yc,plugins:ed,system:td,systemLog:sd,security:ad,onebot:rd,messages:nd,adapters:id},od={login:"Login",logout:"Logout",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",search:"Search",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",close:"Close",refresh:"Refresh",enabled:"Enabled",disabled:"Disabled",yes:"Yes",no:"No"},cd={title:"Xiaoyi_QQ Management Console",username:"Username",password:"Password",usernamePlaceholder:"Enter username",passwordPlaceholder:"Enter password",loginButton:"Login",defaultAccount:"Default account: admin / admin123",loginFailed:"Login failed",invalidCredentials:"Invalid username or password"},dd={dashboard:"Dashboard",plugins:"Plugins",security:"Security",audit:"System Log",system:"System",onebot:"OneBot Config",messages:"Message Log",adapters:"Adapters"},ud={title:"Dashboard",totalMessages:"Total Messages",activePlugins:"Active Plugins",onlineUsers:"Online Users",uptime:"Uptime",systemStatus:"System Status",running:"Running",stopped:"Stopped"},md={title:"Plugin Management",description:"Manage plugin modules, load, enable, disable and configure plugins",name:"Plugin Name",version:"Version",status:"Status",actions:"Actions",enable:"Enable",disable:"Disable",reload:"Reload",configure:"Configure",noPlugins:"No plugins",noPluginsDescription:"No plugins installed yet. Click the button above to upload a plugin ZIP file to install a new plugin.",loading:"Loading plugins...",enableSuccess:"Plugin enabled",disableSuccess:"Plugin disabled",reloadSuccess:"Plugin reloaded",actionFailed:"Action failed",uploadPlugin:"Upload Plugin",uploadAdapter:"Upload Adapter",loadAdapterFirst:'Please load an adapter first on the "Adapters" page',adapter:"Adapter",noAdapter:"Not Bound",selectAdapter:"Select Adapter",changeAdapter:"Change Adapter",selectAdapterFirst:"Please select an adapter first",delete:"Delete",deleteConfirm:'Are you sure you want to delete plugin "{{name}}"? This will delete the plugin directory and cannot be undone.',deleteFailed:"Delete failed"},xd={title:"System Configuration",description:"System configuration and management settings",status:"System Status",config:"System Config",appName:"App Name",appVersion:"App Version",environment:"Environment",debug:"Debug Mode",logLevel:"Log Level",pluginAutoLoad:"Plugin Auto Load",webUIEnabled:"Enable WebUI",webUIEnabledDesc:"Enable or disable the web management interface",debugMode:"Debug Mode",debugModeDesc:"Enable debug mode for more detailed logs",logLevelLabel:"Log Level",systemSettings:"System Settings",adminPassword:"Admin Password",systemInfo:"System Information",saveSettings:"Save Settings",saving:"Saving...",settingsSaved:"Settings saved successfully",saveFailed:"Save failed",loadConfigFailed:"Failed to load configuration",resetAdminPassword:"Reset Admin Password",newPassword:"New Password",confirmPassword:"Confirm Password",newPasswordPlaceholder:"Enter new password (at least 6 characters)",confirmPasswordPlaceholder:"Enter new password again",passwordResetSuccess:"Password reset successfully",passwordResetFailed:"Failed to reset password",confirmReset:"Confirm Reset",resetting:"Resetting...",passwordTooShort:"Password must be at least 6 characters",passwordMismatch:"Passwords do not match"},hd={title:"System Log",description:"System runtime logs and debugging information",events:"Events",stats:"Statistics",time:"Time",user:"User",action:"Action",resource:"Resource",result:"Result"},pd={title:"Security Management",description:"User permissions and security configuration",users:"Users",usersDesc:"Manage user accounts and access permissions",permissions:"Permissions",permissionsDesc:"Configure permission policies and rules",roles:"Roles",rolesDesc:"Manage user roles and groups",developing:"Security features under development..."},gd={title:"OneBot Connection Configuration",description:"Configure OneBot protocol connection parameters",connectionType:"Connection Type",host:"Host Address",port:"Port",saveConfig:"Save Configuration",configSaved:"Configuration saved",saveSuccess:"Configuration saved successfully",saveFailed:"Failed to save configuration",loadFailed:"Failed to load configuration"},fd={title:"Message Log",noMessages:"No message records",whenReceived:"When the robot receives messages, they will be displayed here"},bd={title:"Plugin Adapters",description:"Manage plugin adapter modules",name:"Adapter Name",version:"Version",status:"Status",actions:"Actions",configure:"Configure",noAdapters:"No adapters",noAdaptersDescription:"No plugin adapters available. Click the button above to upload an adapter ZIP file to install a new adapter.",upload:"Upload Adapter",uploadSuccess:"Adapter uploaded successfully",uploadFailed:"Failed to upload adapter",loading:"Loading adapters...",configSuccess:"Configuration saved successfully",configFailed:"Failed to save configuration"},yd={common:od,login:cd,nav:dd,dashboard:ud,plugins:md,system:xd,systemLog:hd,security:pd,onebot:gd,messages:fd,adapters:bd},jd=()=>{if(typeof window>"u")return"zh";try{const s=localStorage.getItem("language");return s==="en"||s==="zh"?s:"zh"}catch{return"zh"}},Nd=me.use(wo).init({resources:{zh:{translation:ld},en:{translation:yd}},lng:jd(),fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!1},returnEmptyString:!1,returnNull:!1});Nd.then(()=>{xr()}).catch(s=>{console.error("Failed to initialize i18n:",s),xr()});function xr(){const s=document.getElementById("root");if(!s){console.error("Root element not found");return}ws.createRoot(s).render(e.jsx(hr.StrictMode,{children:e.jsx(Cc,{})}))}
